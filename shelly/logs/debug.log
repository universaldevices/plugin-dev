2024-10-24 12:44:02.193 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: User=None
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:44:02.194 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:44:02.263 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:44:03.008 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:44:03.259 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:44:03.260 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:44:03.260 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:44:03.260 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:44:03.260 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:44:03.260 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:44:03.261 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:44:03.277 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:44:03.277 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:44:03.277 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:44:03.277 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:44:03.278 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:44:03.278 MainThread iox_p_logger       DEBUG    log:ioxp_log: init error
Traceback (most recent call last):
  File "/home/admin/.local/lib/python3.11/site-packages/ioxplugin/iox_profile.py", line 31, in __init__
    self.__preparefs(is_new)
  File "/home/admin/.local/lib/python3.11/site-packages/ioxplugin/iox_profile.py", line 44, in __preparefs
    os.remove(self.nls_file)
FileNotFoundError: [Errno 2] No such file or directory: './/profile/nls/en_us.txt'
2024-10-24 12:44:03.278 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:44:03.282 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:44:03.291 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:44:03.297 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:44:03.298 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:44:03.298 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:44:03.340 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:44:03.340 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:44:03.381 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:44:03.423 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:44:03.545 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 12:44:03.546 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 12:44:03.546 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 12:44:03.546 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '0d14ba1c-b7e4-4d05-ae3a-69be7de1d8c8', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.547 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 12:44:03.547 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '6411fa1a-eb62-4dd0-b773-197a3c2610a9', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.547 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 12:44:03.548 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '3724bedc-ba42-4797-9640-a272bb3b6563', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.548 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 12:44:03.557 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 12:44:03.557 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.558 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8c5091c6-22bb-447d-baeb-60dd9d7f6e70', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729799031204, 'timeStarted': 1729799042114, 'timeModified': 1729799043445, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.607 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 12:44:03.610 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 12:44:03.610 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 0, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799043467, 'dbVersion': 1} from Polyglot
2024-10-24 12:44:03.613 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 0, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799043467, 'dbVersion': 1}
2024-10-24 12:44:03.614 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 12:44:03.648 Thread-10 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 12:44:03.648 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 12:44:03.648 Thread-10 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 12:44:03.648 Thread-10 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 12:44:03.648 Thread-10 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 12:44:03.659 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 12:44:03.660 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 12:44:03.661 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 12:44:03.681 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 12:44:03.681 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 12:44:03.682 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 12:44:03.682 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 12:44:03.682 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 12:44:03.748 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 12:44:03.828 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 12:44:04.226 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message stop
2024-10-24 12:44:04.226 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING stop
2024-10-24 12:44:04.226 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS stop message {} from Polyglot
2024-10-24 12:44:04.226 Command    udi_interface.interface INFO     interface:_handleInput: Received stop from Polyglot... Shutting Down.
2024-10-24 12:44:04.227 Thread-12 (stop) udi_interface      INFO     ShellyControllerNode:stop: Stopping ... 
2024-10-24 12:44:04.227 Thread-12 (stop) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 0 to Polyglot
2024-10-24 12:44:04.227 Thread-12 (stop) udi_interface.node DEBUG    node:reportDriver: Updating value to 0
2024-10-24 12:44:04.229 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '0', 'uom': 25, 'text': None}]}
2024-10-24 12:44:04.241 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 0 UOM 25
2024-10-24 12:45:18.750 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:45:18.751 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:45:18.751 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 12:45:18.751 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:45:18.752 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:45:18.752 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:45:18.752 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:45:18.878 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:45:18.908 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:45:19.444 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:45:19.445 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:45:19.445 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:45:19.445 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:45:19.445 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:45:19.446 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:45:19.446 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:45:19.473 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:45:19.473 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:45:19.476 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:45:19.476 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:45:19.476 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:45:19.477 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:45:19.493 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:45:19.504 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:45:19.512 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:45:19.512 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:45:19.513 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:45:19.563 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:45:19.563 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:45:19.609 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:45:19.695 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:45:19.738 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 12:45:19.738 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 12:45:19.738 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'a445f678-33c8-44ae-b5ea-ceda23a0cb8a', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.739 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 12:45:19.739 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '0d14ba1c-b7e4-4d05-ae3a-69be7de1d8c8', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.739 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 12:45:19.740 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '6411fa1a-eb62-4dd0-b773-197a3c2610a9', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.740 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 12:45:19.741 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '3724bedc-ba42-4797-9640-a272bb3b6563', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.741 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 12:45:19.743 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 12:45:19.744 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.745 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8c5091c6-22bb-447d-baeb-60dd9d7f6e70', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729799031204, 'timeStarted': 1729799042114, 'timeModified': 1729799119663, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.777 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 12:45:19.778 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 12:45:19.778 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799119649, 'dbVersion': 1} from Polyglot
2024-10-24 12:45:19.781 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799119649, 'dbVersion': 1}
2024-10-24 12:45:19.782 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 12:45:19.848 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 12:45:19.849 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 12:45:19.849 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 12:45:19.850 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 12:45:19.851 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 12:45:19.851 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 12:45:19.852 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 12:45:19.853 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 12:45:19.871 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 12:45:19.871 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 12:45:19.872 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 12:45:19.872 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 12:45:19.873 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 12:45:19.913 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 12:45:20.004 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 12:45:58.105 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:45:58.106 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:45:58.106 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 12:45:58.106 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:45:58.107 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:45:58.107 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:45:58.107 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:45:58.239 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:45:58.269 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:45:58.826 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:45:58.828 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:45:58.828 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:45:58.828 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:45:58.828 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:45:58.829 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:45:58.829 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:45:58.855 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:45:58.856 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:45:58.858 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:45:58.859 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:45:58.859 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:45:58.859 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:45:58.871 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:45:58.887 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:45:58.895 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:45:58.895 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:45:58.896 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:45:58.944 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:45:58.944 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:45:58.986 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:45:59.072 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:45:59.175 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 12:45:59.176 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'a445f678-33c8-44ae-b5ea-ceda23a0cb8a', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.176 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '0d14ba1c-b7e4-4d05-ae3a-69be7de1d8c8', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.177 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 12:45:59.177 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '6411fa1a-eb62-4dd0-b773-197a3c2610a9', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.178 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 12:45:59.181 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '3724bedc-ba42-4797-9640-a272bb3b6563', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.182 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 12:45:59.182 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 12:45:59.186 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 12:45:59.187 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.188 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8c5091c6-22bb-447d-baeb-60dd9d7f6e70', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729799031204, 'timeStarted': 1729799042114, 'timeModified': 1729799159052, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.188 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 12:45:59.188 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799159036, 'dbVersion': 1} from Polyglot
2024-10-24 12:45:59.189 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799159036, 'dbVersion': 1}
2024-10-24 12:45:59.191 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 12:45:59.263 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 12:45:59.263 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 12:45:59.263 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 12:45:59.264 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 12:45:59.265 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 12:45:59.265 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 12:45:59.266 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 12:45:59.266 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 12:45:59.283 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 12:45:59.284 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 12:45:59.285 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 12:45:59.285 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 12:45:59.286 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 12:45:59.324 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 12:45:59.413 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 12:46:06.445 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:46:06.445 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:46:06.445 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:46:06.446 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:46:51.953 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:46:51.953 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:46:51.953 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:46:51.953 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:47:54.523 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:47:54.526 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:47:54.527 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 12:47:54.528 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:47:54.528 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:47:54.528 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:47:54.528 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:47:54.664 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:47:54.700 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:47:55.273 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:47:55.274 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:47:55.274 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:47:55.274 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:47:55.275 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:47:55.275 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:47:55.275 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:47:55.301 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:47:55.302 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:47:55.304 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:47:55.304 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:47:55.305 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:47:55.305 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:47:55.322 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:47:55.334 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:47:55.342 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:47:58.065 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:47:58.066 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:47:58.110 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:47:58.204 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:47:58.249 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:47:58.249 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:47:58.448 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 12:47:58.448 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 12:47:58.448 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'a445f678-33c8-44ae-b5ea-ceda23a0cb8a', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.448 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '0d14ba1c-b7e4-4d05-ae3a-69be7de1d8c8', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.449 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 12:47:58.449 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 12:47:58.449 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '6411fa1a-eb62-4dd0-b773-197a3c2610a9', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.449 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 12:47:58.450 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '3724bedc-ba42-4797-9640-a272bb3b6563', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.450 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 12:47:58.453 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 12:47:58.454 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.454 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8c5091c6-22bb-447d-baeb-60dd9d7f6e70', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729799031204, 'timeStarted': 1729799042114, 'timeModified': 1729799278361, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.485 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 12:47:58.485 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 12:47:58.486 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799278345, 'dbVersion': 1} from Polyglot
2024-10-24 12:47:58.487 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 12:47:58.488 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799278345, 'dbVersion': 1}
2024-10-24 12:47:58.558 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 12:47:58.558 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 12:47:58.558 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 12:47:58.559 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 12:47:58.560 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 12:47:58.569 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 12:47:58.569 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 12:47:58.570 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 12:47:58.590 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 12:47:58.590 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 12:47:58.590 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 12:47:58.591 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 12:47:58.593 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 12:47:58.632 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 12:47:58.720 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 12:48:02.258 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:48:02.258 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:48:02.259 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:48:02.259 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:48:24.467 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:48:24.468 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:48:24.468 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 12:48:24.468 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command x_query not defined
2024-10-24 12:48:26.067 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:48:26.067 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:48:26.067 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 12:48:26.068 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command x_query not defined
2024-10-24 12:48:27.043 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:48:27.043 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:48:27.043 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 12:48:27.044 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command x_query not defined
2024-10-24 12:48:27.472 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:48:27.472 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:48:27.472 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 12:48:27.473 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command x_query not defined
2024-10-24 12:50:57.654 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:52:23.594 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:52:23.595 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:52:23.596 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:52:46.965 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:53:35.077 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:53:35.077 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:53:35.077 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:53:52.255 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:54:15.791 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:54:15.792 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 12:54:15.792 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command x_query not defined
2024-10-24 12:54:27.166 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:54:27.167 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:54:27.167 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:54:27.167 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:54:45.199 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 12:54:55.928 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 12:55:13.368 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 12:55:46.594 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 12:58:08.866 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:58:08.867 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:58:08.867 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 12:58:08.867 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:58:08.867 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:58:08.868 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:58:08.868 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:58:08.997 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:58:09.032 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:58:09.601 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:58:09.602 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:58:09.602 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:58:09.602 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:58:09.602 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:58:09.603 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:58:09.603 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:58:09.630 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:58:09.631 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:58:09.633 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:58:09.634 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:58:09.634 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:58:09.634 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:58:09.651 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:58:09.664 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:58:09.673 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:58:12.438 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:58:12.438 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:58:12.485 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:58:17.945 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:58:17.972 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:58:17.973 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:59:22.041 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 12:59:22.042 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 12:59:22.043 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 12:59:22.043 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 12:59:22.043 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 12:59:22.043 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 12:59:22.043 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 12:59:22.175 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 12:59:22.212 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 12:59:22.798 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 12:59:22.799 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 12:59:22.799 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 12:59:22.799 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 12:59:22.799 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 12:59:22.800 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 12:59:22.800 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 12:59:22.826 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 12:59:22.827 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 12:59:22.829 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 12:59:22.830 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 12:59:22.830 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 12:59:22.830 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 12:59:22.847 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 12:59:22.859 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 12:59:22.866 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 12:59:31.278 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 12:59:31.279 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 12:59:31.300 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 12:59:31.300 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 12:59:31.322 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 12:59:41.892 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 12:59:52.137 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 12:59:53.418 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'a445f678-33c8-44ae-b5ea-ceda23a0cb8a', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 12:59:54.590 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '0d14ba1c-b7e4-4d05-ae3a-69be7de1d8c8', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 12:59:54.590 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 12:59:55.789 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '6411fa1a-eb62-4dd0-b773-197a3c2610a9', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:59:55.790 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 12:59:56.992 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '3724bedc-ba42-4797-9640-a272bb3b6563', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 12:59:56.993 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 12:59:56.997 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 12:59:58.350 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 12:59:59.527 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8c5091c6-22bb-447d-baeb-60dd9d7f6e70', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729799031204, 'timeStarted': 1729799042114, 'timeModified': 1729799971392, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 12:59:59.527 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 13:00:00.730 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799971375, 'dbVersion': 1} from Polyglot
2024-10-24 13:00:00.757 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': 'd019f66c-d957-404c-b28f-0d9c337dbc49', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729799043467, 'timeModified': 1729799971375, 'dbVersion': 1}
2024-10-24 13:00:00.769 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 13:00:00.841 Thread-16 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 13:00:00.842 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 13:00:00.842 Thread-16 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 13:00:00.842 Thread-16 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 13:00:00.843 Thread-16 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 13:00:00.844 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 13:00:00.845 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 13:00:00.846 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 13:00:00.864 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 13:00:00.864 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 13:00:01.759 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 13:00:01.759 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 13:00:01.760 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 13:00:01.866 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 13:00:01.867 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 13:00:49.672 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:00:49.672 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:00:54.026 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 13:00:54.028 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 13:00:58.638 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:00:58.638 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:01:03.900 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 13:02:18.654 Command    udi_interface.node ERROR    node:runCmd: node shellycontroll command discover not defined
2024-10-24 13:04:36.854 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:04:36.854 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:18:29.456 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:18:29.457 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:18:29.458 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 13:18:29.458 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:18:29.458 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:18:29.458 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=Not set
2024-10-24 13:18:29.458 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:18:29.487 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:18:30.240 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:18:30.428 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:18:30.428 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:18:30.429 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:18:30.429 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:18:30.429 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:18:30.430 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:18:30.430 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:18:30.435 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:18:30.435 - iox_p_logger - INFO - fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:18:30.435 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:18:30.448 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:18:30.448 - iox_p_logger - INFO - creating a virtual env in /usr/home/admin/plugins/shelly/.venv
2024-10-24 13:18:30.448 MainThread iox_p_logger       INFO     plugin:generate_code: creating a virtual env in /usr/home/admin/plugins/shelly/.venv
2024-10-24 13:18:33.670 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:18:33.669 - iox_p_logger - INFO - installing requiremnets into the virtual env ...
2024-10-24 13:18:33.669 MainThread iox_p_logger       INFO     plugin:generate_code: installing requiremnets into the virtual env ...
2024-10-24 13:24:30.525 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=Not set
2024-10-24 13:24:30.526 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:24:30.550 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:24:31.081 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:24:31.223 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:24:31.223 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:24:31.224 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:24:31.224 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:24:31.224 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:24:31.224 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:24:31.224 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:24:31.229 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:24:31.228 - iox_p_logger - INFO - fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:24:31.228 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:24:31.238 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:24:31.238 - iox_p_logger - INFO - creating a virtual env in /usr/home/admin/plugins/shelly/.venv
2024-10-24 13:24:31.238 MainThread iox_p_logger       INFO     plugin:generate_code: creating a virtual env in /usr/home/admin/plugins/shelly/.venv
2024-10-24 13:24:34.311 MainThread udi_interface      ERROR    udi_interface:write: 2024-10-24 13:24:34.311 - iox_p_logger - INFO - installing requiremnets into the virtual env ...
2024-10-24 13:24:34.311 MainThread iox_p_logger       INFO     plugin:generate_code: installing requiremnets into the virtual env ...
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     __init__:<module>: User=None
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:25:56.800 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiIvMkJBKHFWPUxUNG9KUjBTIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 13:25:56.801 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:25:56.851 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:25:57.534 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:25:57.799 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:25:57.800 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:25:57.800 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:25:57.800 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:25:57.800 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:25:57.800 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:25:57.801 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:25:57.818 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 13:25:57.818 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 13:25:57.819 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 13:25:57.819 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 13:25:57.819 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 13:25:57.820 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:25:57.828 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 13:25:57.835 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 13:25:57.845 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 13:25:57.845 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 13:25:57.845 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 13:25:57.887 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 13:25:57.887 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 13:25:57.930 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 13:25:57.970 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 13:25:58.050 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 13:25:58.050 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 13:25:58.050 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 13:25:58.050 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.051 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 13:25:58.051 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.051 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 13:25:58.051 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.051 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 13:25:58.052 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 13:25:58.052 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.052 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801556738, 'timeModified': 1729801557980, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.093 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 13:25:58.094 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 13:25:58.094 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 0, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801558001, 'dbVersion': 1} from Polyglot
2024-10-24 13:25:58.094 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 13:25:58.094 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 0, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801558001, 'dbVersion': 1}
2024-10-24 13:25:58.115 Thread-10 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 13:25:58.116 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 13:25:58.116 Thread-10 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 13:25:58.116 Thread-10 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 13:25:58.116 Thread-10 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 13:25:58.127 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 13:25:58.128 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 13:25:58.130 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 13:25:58.168 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 13:25:58.168 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 13:25:58.168 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 13:25:58.168 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 13:25:58.207 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 13:25:58.208 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 13:25:58.302 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 13:25:58.997 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message setController
2024-10-24 13:25:58.997 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING setController
2024-10-24 13:25:58.997 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS setController message {'success': True} from Polyglot
2024-10-24 13:25:58.997 Command    udi_interface.interface DEBUG    interface:_handleInput: connection status node/driver update
2024-10-24 13:26:06.171 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message stop
2024-10-24 13:26:06.171 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING stop
2024-10-24 13:26:06.171 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS stop message {} from Polyglot
2024-10-24 13:26:06.172 Command    udi_interface.interface INFO     interface:_handleInput: Received stop from Polyglot... Shutting Down.
2024-10-24 13:26:06.172 Thread-12 (stop) udi_interface      INFO     ShellyControllerNode:stop: Stopping ... 
2024-10-24 13:26:06.172 Thread-12 (stop) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 0 to Polyglot
2024-10-24 13:26:06.172 Thread-12 (stop) udi_interface.node DEBUG    node:reportDriver: Updating value to 0
2024-10-24 13:26:06.179 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '0', 'uom': 25, 'text': None}]}
2024-10-24 13:26:06.193 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 0 UOM 25
2024-10-24 13:26:10.401 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: User=None
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiIvMkJBKHFWPUxUNG9KUjBTIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 13:26:10.402 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:26:10.454 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:26:11.098 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:26:11.348 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:26:11.349 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:26:11.349 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:26:11.349 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:26:11.349 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:26:11.350 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:26:11.351 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:26:11.369 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 13:26:11.369 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 13:26:11.370 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 13:26:11.370 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 13:26:11.370 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 13:26:11.371 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:26:11.377 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 13:26:11.387 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 13:26:11.395 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 13:26:11.395 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 13:26:11.396 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 13:26:11.438 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 13:26:11.438 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 13:26:11.480 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 13:26:11.575 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 13:26:11.578 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 13:26:11.578 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 13:26:11.578 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.578 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 13:26:11.579 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.579 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 13:26:11.579 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.579 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 13:26:11.579 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.579 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 13:26:11.580 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 13:26:11.581 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.581 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729801571539, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.635 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 13:26:11.635 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 13:26:11.636 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801571522, 'dbVersion': 1} from Polyglot
2024-10-24 13:26:11.636 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801571522, 'dbVersion': 1}
2024-10-24 13:26:11.637 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 13:26:11.651 Thread-10 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 13:26:11.651 Thread-10 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 13:26:11.651 Thread-10 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 13:26:11.651 Thread-10 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 13:26:11.651 Thread-10 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 13:26:11.661 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 13:26:11.662 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 13:26:11.662 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 13:26:11.682 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 13:26:11.683 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 13:26:11.683 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 13:26:11.683 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 13:26:11.686 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 13:26:11.722 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 13:26:11.810 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 13:26:13.370 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message stop
2024-10-24 13:26:13.370 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING stop
2024-10-24 13:26:13.370 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS stop message {} from Polyglot
2024-10-24 13:26:13.371 Command    udi_interface.interface INFO     interface:_handleInput: Received stop from Polyglot... Shutting Down.
2024-10-24 13:26:13.371 Thread-12 (stop) udi_interface      INFO     ShellyControllerNode:stop: Stopping ... 
2024-10-24 13:26:13.371 Thread-12 (stop) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 0 to Polyglot
2024-10-24 13:26:13.372 Thread-12 (stop) udi_interface.node DEBUG    node:reportDriver: Updating value to 0
2024-10-24 13:26:13.375 Thread-1 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '0', 'uom': 25, 'text': None}]}
2024-10-24 13:26:13.386 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 0 UOM 25
2024-10-24 13:26:20.988 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:26:20.995 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:26:20.996 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 13:26:20.998 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:26:20.999 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:26:21.000 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 13:26:21.000 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:26:21.219 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:26:21.279 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:26:22.645 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:26:22.651 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:26:22.653 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:26:22.666 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:26:22.669 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:26:22.676 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:26:22.677 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:26:22.737 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 13:26:22.739 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.148', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 13:26:22.758 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 13:26:22.760 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 13:26:22.765 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 13:26:22.802 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 13:26:22.805 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:26:22.829 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 13:26:22.850 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 13:26:22.883 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 13:26:22.898 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 13:26:22.898 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 13:26:22.899 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 13:26:22.913 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 13:26:36.297 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 13:26:38.100 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 13:26:42.197 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.198 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729801583019, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.320 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 13:26:42.321 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 13:26:42.321 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.322 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 13:26:42.322 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.323 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 13:26:42.323 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.323 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 13:26:42.326 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.326 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 13:26:42.333 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 13:26:42.333 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801583004, 'dbVersion': 1} from Polyglot
2024-10-24 13:26:42.334 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729801583004, 'dbVersion': 1}
2024-10-24 13:26:42.336 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 13:26:42.410 Thread-16 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 13:26:42.411 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 13:26:42.411 Thread-16 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 13:26:42.412 Thread-16 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 13:26:42.413 Thread-16 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 13:26:42.421 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 13:26:42.423 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 13:26:42.424 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 13:26:42.444 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 13:26:42.445 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 13:26:42.445 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 13:26:42.446 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 13:26:42.446 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 13:26:42.487 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 13:26:42.572 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 13:27:06.536 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:27:06.537 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:27:06.537 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 13:37:28.751 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 13:37:28.755 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 13:37:28.757 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 13:37:28.758 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 13:37:28.759 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 13:37:28.759 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 13:37:28.760 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 13:37:28.909 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 13:37:28.947 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 13:37:29.496 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 13:37:29.497 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 13:37:29.497 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 13:37:29.497 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 13:37:29.498 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 13:37:29.499 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 13:37:29.500 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 13:37:29.541 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 13:37:29.541 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '172.26.18.3', 'netmask': '255.255.255.0', 'broadcast': '172.26.18.255'}
2024-10-24 13:37:29.544 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 13:37:29.545 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 13:37:29.546 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 13:37:29.546 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 13:37:29.556 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 13:37:29.584 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 13:37:29.594 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 13:37:29.595 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 13:37:29.596 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 13:37:29.637 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 13:37:29.638 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 13:37:29.680 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 13:37:29.727 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 13:37:29.761 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 13:37:29.763 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 13:37:29.764 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.763 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 13:37:29.764 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.765 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 13:37:29.765 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.765 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 13:37:29.767 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.769 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 13:37:29.780 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 13:37:29.780 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.781 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729802249732, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.863 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 13:37:29.863 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 13:37:29.864 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729802249714, 'dbVersion': 1} from Polyglot
2024-10-24 13:37:29.865 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729802249714, 'dbVersion': 1}
2024-10-24 13:37:29.867 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 13:37:29.945 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 13:37:29.946 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 13:37:29.947 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 13:37:29.949 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 13:37:29.950 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 13:37:29.953 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 13:37:29.956 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 13:37:29.959 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 13:37:29.971 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 13:37:29.972 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 13:37:29.973 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 13:37:29.974 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 13:37:29.974 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 13:37:30.013 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 13:37:30.101 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 13:37:38.111 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:37:38.111 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:37:38.111 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 13:37:53.194 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': None}]}
2024-10-24 13:38:03.209 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 13:38:03.210 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 13:38:03.210 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 370}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 370}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 370}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 13:38:57.568 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 13:38:57.569 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 13:38:57.570 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 13:39:04.429 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': None}]}
2024-10-24 13:39:14.486 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 13:39:14.487 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 13:39:14.487 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 14:14:29.637 MQTT       udi_interface.interface INFO     interface:_disconnect: MQTT Unexpected disconnection. Reason code: Unspecified error. Sent by server: False. Retry in 10 seconds.
2024-10-24 14:14:39.646 MQTT       udi_interface.interface INFO     interface:_disconnect: MQTT: Reconnect successful
2024-10-24 14:14:40.713 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:14:40.714 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 15 Result: 0
2024-10-24 14:14:40.759 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 15. Reason codes: ['Granted QoS 0']
2024-10-24 14:14:55.313 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:14:55.315 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:14:55.315 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:14:55.316 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:14:55.316 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:14:55.317 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:14:55.317 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:14:55.480 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:14:55.534 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:14:56.114 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:14:56.115 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:14:56.116 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:14:56.116 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:14:56.116 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:14:56.118 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:14:56.118 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:14:56.157 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:14:56.157 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '172.26.18.3', 'netmask': '255.255.255.0', 'broadcast': '172.26.18.255'}
2024-10-24 14:14:56.160 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:14:56.162 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:14:56.163 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:14:56.163 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:14:56.173 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:14:56.204 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:14:56.219 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:14:56.219 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:14:56.220 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:14:56.254 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:14:56.256 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:14:56.299 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:14:56.341 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:14:56.383 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:14:56.383 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:14:56.384 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.384 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.384 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:14:56.385 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.385 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:14:56.386 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.387 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:14:56.420 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:14:56.420 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:14:56.421 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.421 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729804496353, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.482 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:14:56.482 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:14:56.482 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729804496333, 'dbVersion': 1} from Polyglot
2024-10-24 14:14:56.485 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:14:56.485 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729804496333, 'dbVersion': 1}
2024-10-24 14:14:56.569 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:14:56.570 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:14:56.570 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:14:56.570 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:14:56.574 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:14:56.577 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:14:56.582 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:14:56.583 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:14:56.585 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:14:56.586 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:14:56.586 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:14:56.587 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:14:56.589 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:14:56.607 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:14:56.719 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:15:33.691 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:15:33.712 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:15:33.712 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:15:37.608 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': None}]}
2024-10-24 14:15:47.626 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:15:47.626 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:15:47.626 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 14:16:52.006 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:16:52.007 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:16:52.007 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:16:56.101 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': None}]}
2024-10-24 14:17:06.123 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:17:06.123 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:17:06.124 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['172.26.18.1', 'fe80::2a0:98ff:fe8a:571'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-2.local', 'referer': {'address': '172.26.18.1', 'family': 'IPv4', 'port': 5353, 'size': 347}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 14:21:24.436 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:21:24.441 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:21:24.444 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:21:24.444 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:21:24.445 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:21:24.445 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:21:24.446 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:21:24.615 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:21:24.665 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:21:25.354 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:21:25.356 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:21:25.356 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:21:25.357 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:21:25.357 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:21:25.359 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:21:25.360 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:21:25.412 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:21:25.414 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:21:25.420 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:21:25.424 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:21:25.425 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:21:25.427 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:21:25.442 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:21:25.499 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:21:25.511 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:21:25.513 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:21:25.514 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:21:25.516 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:21:25.517 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:21:25.564 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:21:25.644 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:21:25.720 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:21:25.720 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:21:25.721 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:21:25.721 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.722 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.728 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:21:25.731 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.732 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:21:25.734 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.734 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:21:25.739 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:21:25.742 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.742 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729804885661, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.764 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:21:25.767 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:21:25.768 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729804885622, 'dbVersion': 1} from Polyglot
2024-10-24 14:21:25.773 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729804885622, 'dbVersion': 1}
2024-10-24 14:21:25.782 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:21:25.878 Thread-16 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:21:25.879 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:21:25.880 Thread-16 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:21:25.881 Thread-16 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:21:25.882 Thread-16 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:21:25.883 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:21:25.884 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:21:25.885 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:21:25.904 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:21:25.904 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:21:25.905 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:21:25.905 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:21:25.906 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:21:25.949 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:21:26.038 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:21:43.060 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:21:43.061 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:21:43.061 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'x_query', 'query': {}} from Polyglot
2024-10-24 14:21:46.885 Command    udi_interface.interface ERROR    interface:_handleInput: _parseInput: failed shellycontroll.runCmd(x_query) ShellyControllerNode.query() missing 1 required positional argument: 'command'
Traceback (most recent call last):
  File "/usr/home/admin/plugins/shelly/.venv/lib/python3.11/site-packages/udi_interface/interface.py", line 964, in _handleInput
    self.nodes_internal[item['address']].runCmd(item)
  File "/usr/home/admin/plugins/shelly/.venv/lib/python3.11/site-packages/udi_interface/node.py", line 178, in runCmd
    fun(self, command)
  File "/usr/home/admin/plugins/shelly/ShellyControllerNode.py", line 258, in query
    node.query()
TypeError: ShellyControllerNode.query() missing 1 required positional argument: 'command'
2024-10-24 14:21:48.729 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:21:48.730 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:21:48.730 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:21:52.436 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:22:02.450 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:22:02.451 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:22:02.451 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy ssh', 'fqdn': 'polisy ssh._ssh._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy https ', 'fqdn': 'polisy https ._https._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.89', 'fe80::eeb5:faff:fea3:7df5', '2600:1700:1250:31b0:eeb5:faff:fea3:7df5'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': [98, 114, 105, 100, 103, 101, 105, 100, 61, 101, 99, 98, 53, 102, 97, 102, 102, 102, 101, 97, 51, 55, 100, 102, 53]}, {'type': 'Buffer', 'data': [109, 111, 100, 101, 108, 105, 100, 61, 66, 83, 66, 48, 48, 50]}], 'txt': {'bridgeid': 'ecb5fafffea37df5', 'modelid': 'BSB002'}, 'name': 'Hue Bridge - A37DF5', 'fqdn': 'Hue Bridge - A37DF5._hue._tcp.local', 'host': 'ecb5faa37df5.local', 'referer': {'address': '192.168.1.89', 'family': 'IPv4', 'port': 5353, 'size': 260}, 'port': 443, 'type': 'hue', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (4)', 'fqdn': 'eisy ssh (4)._ssh._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (4)', 'fqdn': 'eisy https (4)._https._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (3)', 'fqdn': 'eisy ssh (3)._ssh._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (3)', 'fqdn': 'eisy https (3)._https._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'shellypluswdus-b0b21c120198', 'fqdn': 'shellypluswdus-b0b21c120198._shelly._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [97, 112, 112, 61, 80, 108, 117, 115, 87, 97, 108, 108, 68, 105, 109, 109, 101, 114]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 112, 108, 117, 115, 119, 100, 117, 115, 112, 114, 111, 100, 51]}, {'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'app': 'PlusWallDimmer', 'ver': 'pluswdusprod3', 'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._shelly._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 193}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}, {'type': 'Buffer', 'data': [97, 112, 112, 61, 77, 105, 110, 105, 49, 80, 77, 71, 51]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 49, 46, 49, 46, 57, 57, 45, 109, 105, 110, 105, 103, 51, 112, 114, 111, 100, 49]}], 'txt': {'gen': '3', 'app': 'Mini1PMG3', 'ver': '1.1.99-minig3prod1'}}, {'addresses': ['192.168.1.237', '2600:1700:1250:31b0:4661:32ff:fe7c:139c', 'fe80::4661:32ff:fe7c:139c'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': [99, 35, 61, 49, 54]}, {'type': 'Buffer', 'data': [102, 102, 61, 49]}, {'type': 'Buffer', 'data': [105, 100, 61, 48, 54, 58, 48, 56, 58, 56, 55, 58, 67, 57, 58, 54, 56, 58, 67, 70]}, {'type': 'Buffer', 'data': [109, 100, 61, 101, 99, 111, 98, 101, 101, 51, 32, 108, 105, 116, 101]}, {'type': 'Buffer', 'data': [112, 118, 61, 49, 46, 49]}, {'type': 'Buffer', 'data': [115, 35, 61, 49]}, {'type': 'Buffer', 'data': [115, 102, 61, 49]}, {'type': 'Buffer', 'data': [99, 105, 61, 57]}, {'type': 'Buffer', 'data': [115, 104, 61, 113, 114, 80, 68, 52, 119, 61, 61]}], 'txt': {'c#': '16', 'ff': '1', 'id': '06:08:87:C9:68:CF', 'md': 'ecobee3 lite', 'pv': '1.1', 's#': '1', 'sf': '1', 'ci': '9', 'sh': 'qrPD4w=='}, 'name': 'UDI thermostat', 'fqdn': 'UDI thermostat._hap._tcp.local', 'host': 'UDI-thermostat.local', 'referer': {'address': '192.168.1.237', 'family': 'IPv4', 'port': 5353, 'size': 298}, 'port': 33522, 'type': 'hap', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 14:25:40.743 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:25:40.744 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:25:40.745 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:25:40.745 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:25:40.746 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:25:40.746 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:25:40.746 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:25:40.894 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:25:40.930 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:25:41.479 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:25:41.480 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:25:41.481 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:25:41.481 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:25:41.481 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:25:41.483 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:25:41.483 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:25:41.535 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:25:41.536 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:25:41.539 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:25:41.540 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:25:41.541 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:25:41.541 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:25:41.550 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:25:41.580 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:25:41.590 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:25:41.591 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:25:41.592 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:25:41.632 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:25:41.634 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:25:41.676 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:25:41.716 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:25:41.802 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:25:41.805 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:25:41.809 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:25:41.810 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729805141760, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:25:41.869 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:25:41.871 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:25:41.872 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805141724, 'dbVersion': 1} from Polyglot
2024-10-24 14:25:41.874 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:25:41.875 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805141724, 'dbVersion': 1}
2024-10-24 14:25:41.950 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:25:41.950 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:25:41.951 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:25:41.952 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:25:41.953 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:25:41.959 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:25:41.960 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:25:41.961 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:25:41.979 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:25:41.979 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:25:41.980 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:25:41.980 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:25:41.981 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:25:42.020 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:25:42.109 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:25:53.455 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:25:53.455 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:25:53.456 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:26:04.367 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': '_shelly', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:26:14.384 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:26:14.385 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:26:14.385 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [], 'success': True} from Polyglot
2024-10-24 14:27:00.383 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:27:00.385 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:27:00.387 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:27:00.388 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:27:00.389 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:27:00.390 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:27:00.390 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:27:00.568 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:27:00.610 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:27:01.148 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:27:01.150 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:27:01.150 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:27:01.150 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:27:01.150 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:27:01.152 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:27:01.153 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:27:01.193 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:27:01.194 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:27:01.196 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:27:01.199 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:27:01.199 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:27:01.200 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:27:01.209 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:27:01.239 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:27:01.254 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:27:01.254 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:27:01.254 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:27:01.293 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:27:01.294 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:27:01.337 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:27:01.378 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:27:01.500 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:27:01.501 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:27:01.501 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:27:01.501 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:27:01.501 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:27:01.502 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:27:01.502 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:27:01.504 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:27:01.504 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:27:01.536 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:27:01.537 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:27:01.537 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805221400, 'dbVersion': 1} from Polyglot
2024-10-24 14:27:01.538 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805221400, 'dbVersion': 1}
2024-10-24 14:27:01.540 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:27:01.625 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:27:01.625 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:27:01.625 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:27:01.626 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:27:01.627 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:27:01.635 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:27:01.636 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:27:01.637 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:27:01.653 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:27:01.653 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:27:01.654 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:27:01.654 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:27:01.655 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:27:01.698 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:27:01.782 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:27:07.883 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:27:07.884 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:27:07.884 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:27:18.281 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:27:28.294 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:27:28.295 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:27:28.296 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy ssh', 'fqdn': 'polisy ssh._ssh._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy https ', 'fqdn': 'polisy https ._https._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (4)', 'fqdn': 'eisy ssh (4)._ssh._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (4)', 'fqdn': 'eisy https (4)._https._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.89', 'fe80::eeb5:faff:fea3:7df5', '2600:1700:1250:31b0:eeb5:faff:fea3:7df5'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': [98, 114, 105, 100, 103, 101, 105, 100, 61, 101, 99, 98, 53, 102, 97, 102, 102, 102, 101, 97, 51, 55, 100, 102, 53]}, {'type': 'Buffer', 'data': [109, 111, 100, 101, 108, 105, 100, 61, 66, 83, 66, 48, 48, 50]}], 'txt': {'bridgeid': 'ecb5fafffea37df5', 'modelid': 'BSB002'}, 'name': 'Hue Bridge - A37DF5', 'fqdn': 'Hue Bridge - A37DF5._hue._tcp.local', 'host': 'ecb5faa37df5.local', 'referer': {'address': '192.168.1.89', 'family': 'IPv4', 'port': 5353, 'size': 260}, 'port': 443, 'type': 'hue', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (3)', 'fqdn': 'eisy ssh (3)._ssh._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (3)', 'fqdn': 'eisy https (3)._https._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'shellypluswdus-b0b21c120198', 'fqdn': 'shellypluswdus-b0b21c120198._shelly._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [97, 112, 112, 61, 80, 108, 117, 115, 87, 97, 108, 108, 68, 105, 109, 109, 101, 114]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 112, 108, 117, 115, 119, 100, 117, 115, 112, 114, 111, 100, 51]}, {'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'app': 'PlusWallDimmer', 'ver': 'pluswdusprod3', 'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._shelly._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 193}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}, {'type': 'Buffer', 'data': [97, 112, 112, 61, 77, 105, 110, 105, 49, 80, 77, 71, 51]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 49, 46, 49, 46, 57, 57, 45, 109, 105, 110, 105, 103, 51, 112, 114, 111, 100, 49]}], 'txt': {'gen': '3', 'app': 'Mini1PMG3', 'ver': '1.1.99-minig3prod1'}}, {'addresses': ['192.168.1.237', '2600:1700:1250:31b0:4661:32ff:fe7c:139c', 'fe80::4661:32ff:fe7c:139c'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': [99, 35, 61, 49, 54]}, {'type': 'Buffer', 'data': [102, 102, 61, 49]}, {'type': 'Buffer', 'data': [105, 100, 61, 48, 54, 58, 48, 56, 58, 56, 55, 58, 67, 57, 58, 54, 56, 58, 67, 70]}, {'type': 'Buffer', 'data': [109, 100, 61, 101, 99, 111, 98, 101, 101, 51, 32, 108, 105, 116, 101]}, {'type': 'Buffer', 'data': [112, 118, 61, 49, 46, 49]}, {'type': 'Buffer', 'data': [115, 35, 61, 49]}, {'type': 'Buffer', 'data': [115, 102, 61, 49]}, {'type': 'Buffer', 'data': [99, 105, 61, 57]}, {'type': 'Buffer', 'data': [115, 104, 61, 113, 114, 80, 68, 52, 119, 61, 61]}], 'txt': {'c#': '16', 'ff': '1', 'id': '06:08:87:C9:68:CF', 'md': 'ecobee3 lite', 'pv': '1.1', 's#': '1', 'sf': '1', 'ci': '9', 'sh': 'qrPD4w=='}, 'name': 'UDI thermostat', 'fqdn': 'UDI thermostat._hap._tcp.local', 'host': 'UDI-thermostat.local', 'referer': {'address': '192.168.1.237', 'family': 'IPv4', 'port': 5353, 'size': 298}, 'port': 33522, 'type': 'hap', 'protocol': 'tcp'}], 'success': True} from Polyglot
2024-10-24 14:28:39.835 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:28:39.836 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:28:39.837 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:28:39.838 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:28:39.838 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:28:39.839 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:28:39.839 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:28:40.054 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:28:40.092 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:28:40.636 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:28:40.637 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:28:40.637 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:28:40.637 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:28:40.638 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:28:40.639 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:28:40.640 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:28:40.678 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:28:40.679 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:28:40.683 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:28:40.684 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:28:40.685 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:28:40.685 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:28:40.693 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:28:40.725 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:28:40.734 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:28:40.736 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:28:40.736 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:28:40.779 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:28:40.780 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:28:40.823 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:28:40.864 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:28:40.985 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:28:40.986 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:28:40.987 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:28:40.989 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729805320911, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:28:41.025 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:28:41.026 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:28:41.026 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805320874, 'dbVersion': 1} from Polyglot
2024-10-24 14:28:41.029 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805320874, 'dbVersion': 1}
2024-10-24 14:28:41.034 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:28:41.112 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:28:41.114 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:28:41.115 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:28:41.116 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:28:41.117 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:28:41.118 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:28:41.119 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:28:41.120 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:28:41.139 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:28:41.140 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:28:41.141 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:28:41.142 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:28:41.142 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:28:41.180 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:28:41.266 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:28:44.655 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:28:44.655 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:28:44.656 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:28:47.931 Command    udi_interface      ERROR    ShellyProtocolHandler:discover: discover failed .... 
2024-10-24 14:30:22.713 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:30:22.713 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:30:22.714 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:30:26.190 Command    udi_interface      ERROR    ShellyProtocolHandler:discover: discover failed .... 
2024-10-24 14:30:52.528 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:30:52.529 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:30:52.530 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:30:52.532 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:30:52.534 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:30:52.534 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:30:52.535 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:30:52.693 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:30:52.731 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:30:53.276 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:30:53.277 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:30:53.278 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:30:53.278 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:30:53.278 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:30:53.280 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:30:53.281 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:30:53.319 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:30:53.320 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:30:53.323 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:30:53.324 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:30:53.325 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:30:53.326 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:30:53.335 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:30:53.366 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:30:53.376 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:30:53.377 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:30:53.377 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:30:53.412 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:30:53.413 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:30:53.456 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:30:53.508 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:30:53.624 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:30:53.626 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:30:53.627 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:30:53.627 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.628 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.629 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:30:53.630 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.630 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:30:53.632 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.632 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:30:53.637 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:30:53.640 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.640 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729805453543, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.662 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:30:53.663 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:30:53.663 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805453529, 'dbVersion': 1} from Polyglot
2024-10-24 14:30:53.664 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805453529, 'dbVersion': 1}
2024-10-24 14:30:53.667 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:30:53.763 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:30:53.764 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:30:53.764 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:30:53.765 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:30:53.765 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:30:53.772 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:30:53.773 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:30:53.774 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:30:53.790 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:30:53.791 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:30:53.792 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:30:53.792 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:30:53.792 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:30:53.830 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:30:53.920 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:31:18.968 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:31:18.968 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:31:18.968 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:31:22.095 Command    udi_interface      ERROR    ShellyProtocolHandler:discover: discover failed .... 
2024-10-24 14:31:52.643 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:31:52.644 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:31:52.645 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:31:52.645 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:31:52.646 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:31:52.647 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:31:52.647 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:31:52.818 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:31:52.867 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:31:53.432 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:31:53.433 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:31:53.434 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:31:53.434 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:31:53.434 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:31:53.436 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:31:53.437 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:31:53.476 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:31:53.477 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:31:53.479 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:31:53.481 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:31:53.481 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:31:53.482 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:31:53.492 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:31:53.522 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:31:53.532 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:31:53.534 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:31:53.534 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:31:53.574 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:31:53.575 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:31:53.578 Thread-6 (send_thread) udi_interface.interface INFO     interface:_disconnect: MQTT Unexpected disconnection. Reason code: Unspecified error. Sent by server: False. Retry in 10 seconds.
2024-10-24 14:32:03.587 Thread-6 (send_thread) udi_interface.interface INFO     interface:_disconnect: MQTT: Reconnect successful
2024-10-24 14:32:03.588 Thread-6 (send_thread) udi_interface.interface CRITICAL interface:send_thread: Message send thread aborting:  Message publish failed: The connection was lost.
2024-10-24 14:32:03.589 MQTT       udi_interface.interface INFO     interface:_disconnect: MQTT Unexpected disconnection. Reason code: Unspecified error. Sent by server: False. Retry in 10 seconds.
2024-10-24 14:32:17.780 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:32:17.781 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:32:17.782 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:32:17.782 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:32:17.783 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:32:17.784 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:32:17.784 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:32:17.932 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:32:17.980 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:32:18.571 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:32:18.573 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:32:18.574 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:32:18.576 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:32:18.577 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:32:18.579 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:32:18.579 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:32:18.619 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:32:18.619 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:32:18.622 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:32:18.625 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:32:18.626 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:32:18.626 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:32:18.635 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:32:18.668 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:32:18.681 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:32:18.681 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:32:18.682 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:32:18.715 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:32:18.717 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:32:18.760 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:32:18.800 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:32:18.921 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:32:18.922 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:32:18.922 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.923 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.924 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:32:18.924 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:32:18.926 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.927 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:32:18.929 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.930 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:32:18.937 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:32:18.938 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.938 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729805538831, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.971 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:32:18.972 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:32:18.973 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805538810, 'dbVersion': 1} from Polyglot
2024-10-24 14:32:18.975 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729805538810, 'dbVersion': 1}
2024-10-24 14:32:18.982 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:32:19.070 Thread-16 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:32:19.071 Thread-16 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:32:19.071 Thread-16 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:32:19.072 Thread-16 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:32:19.072 Thread-16 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:32:19.081 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:32:19.082 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:32:19.084 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:32:19.102 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:32:19.102 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:32:19.103 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:32:19.103 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:32:19.104 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:32:19.145 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:32:19.231 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:32:21.695 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:32:21.696 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:32:21.696 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:32:25.381 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': None, 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:32:35.403 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:32:35.403 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:32:35.404 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy ssh', 'fqdn': 'polisy ssh._ssh._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy https ', 'fqdn': 'polisy https ._https._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 381}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.89', 'fe80::eeb5:faff:fea3:7df5', '2600:1700:1250:31b0:eeb5:faff:fea3:7df5'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': [98, 114, 105, 100, 103, 101, 105, 100, 61, 101, 99, 98, 53, 102, 97, 102, 102, 102, 101, 97, 51, 55, 100, 102, 53]}, {'type': 'Buffer', 'data': [109, 111, 100, 101, 108, 105, 100, 61, 66, 83, 66, 48, 48, 50]}], 'txt': {'bridgeid': 'ecb5fafffea37df5', 'modelid': 'BSB002'}, 'name': 'Hue Bridge - A37DF5', 'fqdn': 'Hue Bridge - A37DF5._hue._tcp.local', 'host': 'ecb5faa37df5.local', 'referer': {'address': '192.168.1.89', 'family': 'IPv4', 'port': 5353, 'size': 260}, 'port': 443, 'type': 'hue', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh', 'fqdn': 'eisy ssh._ssh._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https ', 'fqdn': 'eisy https ._https._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 375}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (4)', 'fqdn': 'eisy ssh (4)._ssh._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (4)', 'fqdn': 'eisy https (4)._https._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 385}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy ssh (3)', 'fqdn': 'eisy ssh (3)._ssh._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 22, 'type': 'ssh', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy https (3)', 'fqdn': 'eisy https (3)._https._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 383}, 'port': 8443, 'type': 'https', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'shellypluswdus-b0b21c120198', 'fqdn': 'shellypluswdus-b0b21c120198._shelly._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 773}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [97, 112, 112, 61, 80, 108, 117, 115, 87, 97, 108, 108, 68, 105, 109, 109, 101, 114]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 112, 108, 117, 115, 119, 100, 117, 115, 112, 114, 111, 100, 51]}, {'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'app': 'PlusWallDimmer', 'ver': 'pluswdusprod3', 'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._shelly._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 193}, 'port': 80, 'type': 'shelly', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}, {'type': 'Buffer', 'data': [97, 112, 112, 61, 77, 105, 110, 105, 49, 80, 77, 71, 51]}, {'type': 'Buffer', 'data': [118, 101, 114, 61, 49, 46, 49, 46, 57, 57, 45, 109, 105, 110, 105, 103, 51, 112, 114, 111, 100, 49]}], 'txt': {'gen': '3', 'app': 'Mini1PMG3', 'ver': '1.1.99-minig3prod1'}}], 'success': True} from Polyglot
2024-10-24 14:53:31.529 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:53:31.532 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:53:31.533 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:53:31.534 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:53:31.534 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:53:31.534 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:53:31.534 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:53:31.668 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:53:31.705 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:53:32.271 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:53:32.272 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:53:32.272 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:53:32.273 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:53:32.273 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:53:32.273 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:53:32.274 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:53:32.303 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:53:32.304 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:53:32.306 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:53:32.307 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:53:32.307 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:53:32.307 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:53:32.328 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:53:32.336 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:53:32.344 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:53:32.345 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:53:32.345 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:53:32.397 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:53:32.398 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:53:32.440 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:53:32.536 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:53:32.578 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:53:32.579 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:53:32.580 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.580 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:53:32.580 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.581 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:53:32.581 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.581 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:53:32.582 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.582 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:53:32.586 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:53:32.586 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.586 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729806812504, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.616 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:53:32.617 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:53:32.617 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729806812488, 'dbVersion': 1} from Polyglot
2024-10-24 14:53:32.619 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729806812488, 'dbVersion': 1}
2024-10-24 14:53:32.619 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:53:32.686 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:53:32.686 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:53:32.687 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:53:32.687 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:53:32.688 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:53:32.688 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:53:32.689 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:53:32.690 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:53:32.708 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:53:32.709 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:53:32.710 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:53:32.710 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:53:32.711 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:53:32.753 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:53:32.841 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:53:35.760 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:53:35.761 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:53:35.761 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:53:39.897 Command    udi_interface      ERROR    ShellyProtocolHandler:discover: discover failed .... 
2024-10-24 14:54:55.541 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:54:55.542 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:54:55.543 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:54:55.543 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:54:55.544 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:54:55.544 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:54:55.544 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:54:55.701 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:54:55.741 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:54:56.303 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:54:56.304 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:54:56.304 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:54:56.304 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:54:56.305 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:54:56.305 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:54:56.305 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:54:56.334 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:54:56.335 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:54:56.337 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:54:56.337 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:54:56.338 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:54:56.338 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:54:56.345 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:54:56.367 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:54:56.375 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:54:56.376 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:54:56.376 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:54:56.418 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:54:56.418 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:54:56.463 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:54:56.541 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:54:56.584 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:54:56.585 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:54:56.585 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.586 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:54:56.586 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729806896528, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.586 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:54:56.587 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.587 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.587 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:54:56.588 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.588 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:54:56.589 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.589 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:54:56.622 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:54:56.622 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:54:56.622 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729806896515, 'dbVersion': 1} from Polyglot
2024-10-24 14:54:56.624 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:54:56.624 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729806896515, 'dbVersion': 1}
2024-10-24 14:54:56.693 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:54:56.693 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:54:56.693 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:54:56.694 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:54:56.694 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:54:56.695 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:54:56.695 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:54:56.707 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:54:56.713 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:54:56.714 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:54:56.715 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:54:56.715 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:54:56.715 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:54:56.772 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:54:56.866 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:55:11.050 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:55:11.050 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:55:11.051 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:55:14.456 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': 'http', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:55:24.474 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:55:24.475 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:55:24.475 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 209}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 207}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 206}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 208}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 377}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}], 'success': True} from Polyglot
2024-10-24 14:56:32.607 Thread-17 (bonjourHandler) udi_interface      ERROR    ShellyProtocolHandler:processMDNSResults: name 'ipaddress' is not defined
2024-10-24 14:56:36.116 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:56:36.117 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:56:36.117 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:56:39.581 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': 'http', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:56:49.593 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:56:49.594 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:56:49.594 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 377}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 207}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 209}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 208}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 206}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}], 'success': True} from Polyglot
2024-10-24 14:57:55.987 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:57:55.988 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:57:55.989 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:57:55.989 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:57:55.989 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:57:55.989 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:57:55.989 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:57:56.225 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:57:56.267 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:57:56.872 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:57:56.874 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:57:56.874 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:57:56.874 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:57:56.874 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:57:56.875 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:57:56.875 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:57:56.907 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:57:56.908 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:57:56.909 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:57:56.911 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:57:56.911 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:57:56.911 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:57:56.933 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:57:56.941 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:57:56.951 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:57:56.952 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:57:56.952 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:57:57.000 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:57:57.001 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:57:57.060 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:57:57.169 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:57:57.172 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:57:57.173 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:57:57.173 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.174 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:57:57.174 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.174 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:57:57.174 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.175 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:57:57.176 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.176 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:57:57.179 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:57:57.179 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.180 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729807077122, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.224 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:57:57.224 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:57:57.224 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807077108, 'dbVersion': 1} from Polyglot
2024-10-24 14:57:57.226 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:57:57.226 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807077108, 'dbVersion': 1}
2024-10-24 14:57:57.288 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:57:57.288 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:57:57.289 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:57:57.289 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:57:57.289 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:57:57.291 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:57:57.291 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:57:57.292 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:57:57.347 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:57:57.348 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:57:57.348 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:57:57.349 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:57:57.386 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:57:57.440 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:57:57.480 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:58:00.777 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:58:00.778 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:58:00.778 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 14:58:03.787 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': 'http', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 14:58:13.807 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 14:58:13.807 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 14:58:13.807 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 206}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 208}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 207}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 209}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 377}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}], 'success': True} from Polyglot
2024-10-24 14:59:49.842 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 14:59:49.844 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 14:59:49.844 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 14:59:49.844 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 14:59:49.844 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 14:59:49.845 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 14:59:49.845 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 14:59:49.969 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 14:59:50.005 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 14:59:50.554 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 14:59:50.555 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 14:59:50.555 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 14:59:50.555 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 14:59:50.555 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 14:59:50.556 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 14:59:50.556 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 14:59:50.586 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 14:59:50.586 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 14:59:50.589 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 14:59:50.589 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 14:59:50.589 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 14:59:50.590 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 14:59:50.611 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 14:59:50.619 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 14:59:50.627 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 14:59:50.628 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 14:59:50.628 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 14:59:50.680 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 14:59:50.681 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 14:59:50.727 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 14:59:50.814 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 14:59:50.856 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 14:59:50.857 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 14:59:50.857 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.858 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 14:59:50.858 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.858 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 14:59:50.859 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.859 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 14:59:50.860 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.860 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 14:59:50.865 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 14:59:50.866 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.867 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729807190785, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.900 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 14:59:50.901 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 14:59:50.901 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807190770, 'dbVersion': 1} from Polyglot
2024-10-24 14:59:50.904 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807190770, 'dbVersion': 1}
2024-10-24 14:59:50.906 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 14:59:50.977 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 14:59:50.977 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 14:59:50.978 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 14:59:50.978 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 14:59:50.979 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 14:59:50.986 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 14:59:50.986 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 14:59:50.987 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 14:59:51.003 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 14:59:51.004 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 14:59:51.004 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 14:59:51.004 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 14:59:51.005 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 14:59:51.047 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 14:59:51.131 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 14:59:58.102 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 14:59:58.102 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 14:59:58.103 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 15:00:00.776 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': 'http', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 15:00:10.793 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 15:00:10.793 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 15:00:10.794 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 209}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 208}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 206}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 207}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 377}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}], 'success': True} from Polyglot
2024-10-24 15:01:24.156 MainThread udi_interface      INFO     polylogger:set_basic_config: set_basic_config: enable=True level=30
2024-10-24 15:01:24.157 MainThread udi_interface      INFO     __init__:<module>: UDI interface initializing
2024-10-24 15:01:24.157 MainThread udi_interface      INFO     __init__:<module>: User=admin
2024-10-24 15:01:24.157 MainThread udi_interface      INFO     __init__:<module>: Home=/home/admin
2024-10-24 15:01:24.158 MainThread udi_interface      INFO     __init__:<module>: Node Server Path=/usr/home/admin/plugins/shelly
2024-10-24 15:01:24.158 MainThread udi_interface      INFO     __init__:<module>: PG3INIT=eyJ1dWlkIjoiMDA6MjE6Yjk6MjY6MjY6MjciLCJwcm9maWxlTnVtIjoyLCJsb2dMZXZlbCI6IkRFQlVHIiwidG9rZW4iOiJSdSshRmNLdHArWkJlR20pIiwibXF0dEhvc3QiOiJsb2NhbGhvc3QiLCJtcXR0UG9ydCI6ODg4Mywic2VjdXJlIjoxLCJpc1BHM3giOnRydWUsInBnM1ZlcnNpb24iOiIzLjMuMTMiLCJpc3lWZXJzaW9uIjoiNS44LjQiLCJlZGl0aW9uIjoiRnJlZSJ9
2024-10-24 15:01:24.158 MainThread udi_interface      INFO     __init__:<module>: Loading interface module
2024-10-24 15:01:24.291 MainThread udi_interface      INFO     interface:<module>: Loading MQTT module
2024-10-24 15:01:24.326 MainThread udi_interface      INFO     interface:<module>: MQTT module loaded
2024-10-24 15:01:24.913 MainThread udi_interface      INFO     __init__:<module>: Loading udi_interface module
2024-10-24 15:01:24.914 MainThread udi_interface      INFO     __init__:<module>: Loading node module
2024-10-24 15:01:24.915 MainThread udi_interface      INFO     __init__:<module>: Loading custom module
2024-10-24 15:01:24.915 MainThread udi_interface      INFO     __init__:<module>: Loading isy module
2024-10-24 15:01:24.915 MainThread udi_interface      INFO     __init__:<module>: Loading OAuth module
2024-10-24 15:01:24.916 MainThread udi_interface      INFO     __init__:<module>: UDI interface initialized
2024-10-24 15:01:24.916 MainThread udi_interface      INFO     __init__:<module>: UDI Python Interface for Polyglot version 3 3.3.14 Starting...
2024-10-24 15:01:24.949 MainThread udi_interface.interface INFO     interface:__init__: Initialization received from Polyglot V3 3.3.13  [ISY: 5.8.4, Slot: 2]
2024-10-24 15:01:24.949 MainThread udi_interface.interface INFO     interface:__init__: Connect: Network Interface: {'addr': '192.168.1.64', 'netmask': '255.255.255.0', 'broadcast': '192.168.1.255'}
2024-10-24 15:01:24.952 MainThread udi_interface.custom INFO     custom:_save: Sending data notices to Polyglot.
2024-10-24 15:01:24.953 MainThread iox_p_logger       INFO     plugin:validate_json: fastjsonschema does not currently support file references ... ignoring validation request.
2024-10-24 15:01:24.953 Interface  udi_interface.interface INFO     interface:_startMqtt: Connecting to MQTT... localhost:8883
2024-10-24 15:01:24.956 Interface  udi_interface.interface INFO     interface:_startMqtt: Using SSL cert: 0021b9262627_2.cert key: 0021b9262627_2.key ca: /usr/local/etc/ssl/certs/ud.ca.cert
2024-10-24 15:01:24.977 Interface  udi_interface.interface INFO     interface:_startMqtt: MQTT keepalive is 300 seconds.
2024-10-24 15:01:24.987 MainThread iox_p_logger       INFO     iox_node_impl_gen:create: .//ShellyProtocolHandler.py already exists ... ignoring
2024-10-24 15:01:24.999 MainThread udi_interface.interface WARNING  interface:db_getNodeDrivers: shellycontroll not found in database.
2024-10-24 15:01:25.000 MainThread udi_interface.interface INFO     interface:addNode: Adding node Shelly Controller(shellycontroll) [None]
2024-10-24 15:01:25.001 MainThread udi_interface.interface INFO     interface:setController: Using node "shellycontroll", driver "ST" for connection status.
2024-10-24 15:01:25.042 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Connected with Reason code: Success
2024-10-24 15:01:25.043 MQTT       udi_interface.interface INFO     interface:_connect: MQTT Subscribing to topic: udi/pg3/ns/clients/00:21:b9:26:26:27_2 -  MID: 2 Result: 0
2024-10-24 15:01:25.087 MQTT       udi_interface.interface INFO     interface:_subscribe: MQTT Subscribed Successfully for Message ID: 2. Reason codes: ['Granted QoS 0']
2024-10-24 15:01:25.192 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = notices
2024-10-24 15:01:25.238 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getAll
2024-10-24 15:01:25.240 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getAll
2024-10-24 15:01:25.241 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'f98fbb01-cbfc-4db8-b3d6-9657ab31e724', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n", 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.241 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ef280d49-e637-4295-960c-ac5d0542e394', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'notices', 'value': '{}', 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.242 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message getNsInfo
2024-10-24 15:01:25.242 Command    udi_interface.custom DEBUG    custom:load: CUSTOM: load {}
2024-10-24 15:01:25.242 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': '45ef3045-758f-4eed-93f7-281072c23b7e', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'nsdata', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.243 Command    udi_interface.interface DEBUG    interface:_handleInput: Key nsdata should be passed to node server.
2024-10-24 15:01:25.244 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getAll message {'id': 'ded70dda-a736-4273-baba-0c172f8ba99f', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'key': 'oauth', 'value': 'null', 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.244 Command    udi_interface.interface DEBUG    interface:_handleInput: Key oauth should be passed to node server.
2024-10-24 15:01:25.248 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING getNsInfo
2024-10-24 15:01:25.249 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '00200245-b85d-4716-a888-9e7eb16f7062', 'uuid': '00:21:b9:26:26:27', 'name': 'udiTeslaEV2', 'nsid': '50dfa8d4-e3cf-4eb6-a4de-ffa59b84ed1d', 'expires': 1731706915000, 'nickname': None, 'profileNum': 1, 'developerMode': 0, 'timeAdded': 1729114920125, 'timeStarted': 1729798710273, 'timeModified': 1729798720055, 'version': '0.1.18', 'edition': 'Standard', 'branch': 'portal3', 'url': 'https://github.com/Panda88CO/udi-TeslaEV2', 'home': '/var/polyglot/pg3/ns/0021b9262627_1', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 1, 'connected': 1, 'devMode': 0, 'type': 'python3', 'executable': 'TeslaEV2main.py', 'shortPoll': 600, 'longPoll': 3600, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 1, 'requestId': 0, 'status_node': None, 'status_driver': None, 'orderId': None, 'store': 'Beta', 'option': 'c6757aeb-a976-448e-87e9-923f1406762c', 'noLicense': 0, 'latestVersion': '0.1.27', 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.250 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS getNsInfo message {'id': '8bda3098-67b8-4d2f-847d-7c51e4b8bfdb', 'uuid': '00:21:b9:26:26:27', 'name': 'shelly', 'nsid': '7bbbe49e-7991-404d-8fa2-576637791635', 'expires': 0, 'nickname': None, 'profileNum': 2, 'developerMode': 1, 'timeAdded': 1729801545824, 'timeStarted': 1729801570341, 'timeModified': 1729807285165, 'version': '1.0.0', 'edition': 'Free', 'branch': '', 'url': '', 'home': '/var/polyglot/pg3/ns/0021b9262627_2', 'log': 'logs/debug.log', 'logLevel': 'DEBUG', 'logLevelList': '[{"id":4,"name":"Debug","value":"DEBUG","level":10},{"id":3,"name":"Info","value":"INFO","level":20},{"id":2,"name":"Warning","value":"WARNING","level":30},{"id":1,"name":"Error","value":"ERROR","level":40},{"id":0,"name":"Critical","value":"CRITICAL","level":50}]', 'enabled': 0, 'connected': 1, 'devMode': 1, 'type': 'python3', 'executable': 'shelly.py', 'shortPoll': 60, 'longPoll': 300, 'allowIsyAccess': 0, 'nsInfoPoll': 0, 'discover': 0, 'oauth': 0, 'requestId': 0, 'status_node': 'shellycontroll', 'status_driver': 'ST', 'orderId': None, 'store': 'Local', 'option': '', 'noLicense': 0, 'latestVersion': '0.0.1', 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.274 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message addnode
2024-10-24 15:01:25.275 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING addnode
2024-10-24 15:01:25.276 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS addnode message {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807285145, 'dbVersion': 1} from Polyglot
2024-10-24 15:01:25.278 Command    udi_interface.interface DEBUG    interface:_handleResult: add node response: {'id': '2cd68229-0397-48e3-9869-08ad67755b72', 'uuid': '00:21:b9:26:26:27', 'profileNum': 2, 'address': 'shellycontroll', 'name': 'Shelly Controller', 'nodeDefId': 'shellycontroll', 'nls': None, 'hint': '0x00000000', 'controller': 1, 'primaryNode': 'shellycontroll', 'private': None, 'isPrimary': 1, 'enabled': 1, 'timeAdded': 1729801558001, 'timeModified': 1729807285145, 'dbVersion': 1}
2024-10-24 15:01:25.280 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:start: Starting... 
2024-10-24 15:01:25.353 Thread-15 (start) udi_interface.interface DEBUG    interface:setCustomParamsDoc: Sending customparamsdoc to Polyglot.
2024-10-24 15:01:25.354 Thread-15 (start) udi_interface      INFO     ShellyControllerNode:addAllNodes: Done adding nodes ...
2024-10-24 15:01:25.354 Thread-15 (start) udi_interface.interface INFO     interface:updateProfile: Sending Install Profile command to Polyglot.
2024-10-24 15:01:25.354 Thread-15 (start) udi_interface.node DEBUG    node:setDriver: shellycontroll:Shelly Controller Reporting set ST to 1 to Polyglot
2024-10-24 15:01:25.355 Thread-15 (start) udi_interface.node DEBUG    node:reportDriver: Updating value to 1
2024-10-24 15:01:25.360 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'key': 'customparamsdoc', 'value': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"}]}
2024-10-24 15:01:25.360 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'installprofile': {'reboot': False}}
2024-10-24 15:01:25.361 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'set': [{'address': 'shellycontroll', 'driver': 'ST', 'value': '1', 'uom': 25, 'text': None}]}
2024-10-24 15:01:25.380 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message custom
2024-10-24 15:01:25.381 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING custom
2024-10-24 15:01:25.381 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS custom message {'customparamsdoc': "<p>Very simple audio player for eisy. It can:</p>\n\n<ul>\n<li>Play the default sounds</li>\n<li>Play through the speaker jack on the back</li>\n</ul>\n\n<h2>Professional Version</h2>\n\n<ul>\n<li>You can upload your music in a zip file (size limit is 20M)</li>\n<li>It can play online stations </li>\n<li>It can automatically convert your text to speech and play it</li>\n<li>Play through Paired Bluetooth speakers - you will also need the Bluetooth plugin (free)</li>\n<li>Remove entries</li>\n<li>Volume control</li>\n</ul>\n\n<h2>Parameters:</h2>\n\n<ol>\n<li><p>path\nThis is the path for storing your files. This can be any path but, if you change it, you will need to make sure you have ssh access to it in order to make give it the right permissions/ownership. If you're not a geek, leave it as is</p></li>\n<li><p>stations \nThe value for this parameter is in the form of:\nname===url, name1===url1, name2===url2, ... </p></li>\n<li><p>For text to speech, create custom parameters </p>\n\n<ul>\n<li>key \ntts<em><source lang></em><dest_lang><em>name-of-your-file\ne.g. tts</em>en<em>en</em>Hello-World\nThis key converts the value (see below) from your English text (en) to voice in English (en).</li>\n<li>value \nThe text of what you want spoken.\ne.g. Hello World!</li>\n</ul></li>\n</ol>\n\n<h2>Important Note:</h2>\n\n<p>If your originally crated tts files do not work, rename them by adding a <em>t at the end of the file name. For instance\nhello</em>world.mp3 -> hello<em>world</em>t.mp3</p>\n"} from Polyglot
2024-10-24 15:01:25.382 MQTT       udi_interface.interface INFO     interface:_message: Successfully set key = customparamsdoc
2024-10-24 15:01:25.382 Command    udi_interface.interface DEBUG    interface:_handleInput: Process custom message customparamsdoc from Polyglot
2024-10-24 15:01:25.420 MQTT       udi_interface.interface INFO     interface:_message: Successfully set shellycontroll :: ST to 1 UOM 25
2024-10-24 15:01:25.515 MQTT       udi_interface.interface INFO     interface:_message: Profile installation finished
2024-10-24 15:01:27.237 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message command
2024-10-24 15:01:27.237 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING command
2024-10-24 15:01:27.238 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS command message {'address': 'shellycontroll', 'cmd': 'discover', 'query': {}} from Polyglot
2024-10-24 15:01:31.310 Thread-6 (send_thread) udi_interface.interface DEBUG    interface:_send: PUBLISHING {'bonjour': [{'type': 'http', 'subtypes': None, 'protocol': 'tcp'}]}
2024-10-24 15:01:41.341 MQTT       udi_interface.interface DEBUG    interface:_message: QUEUING incoming message bonjour
2024-10-24 15:01:41.341 Command    udi_interface.interface DEBUG    interface:_parseInput: DEQUEING bonjour
2024-10-24 15:01:41.342 Command    udi_interface.interface DEBUG    interface:_handleInput: PROCESS bonjour message {'command': 'bonjour', 'mdns': [{'addresses': ['192.168.1.113'], 'subtypes': [], 'name': 'ShellyPlusWDUS-B0B21C120198', 'fqdn': 'ShellyPlusWDUS-B0B21C120198._http._tcp.local', 'host': 'ShellyPlusWDUS-B0B21C120198.local', 'referer': {'address': '192.168.1.113', 'family': 'IPv4', 'port': 5353, 'size': 377}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 50]}], 'txt': {'gen': '2'}}, {'addresses': ['fe80::221:b9ff:fe26:2627', '2600:1700:1250:31b0:221:b9ff:fe26:2627', '192.168.1.64'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http ', 'fqdn': 'eisy http ._http._tcp.local', 'host': 'eisy-3.local', 'referer': {'address': '192.168.1.64', 'family': 'IPv4', 'port': 5353, 'size': 206}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:6cfb', '2600:1700:1250:31b0:221:b9ff:fe02:6cfb', '192.168.1.205'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (3)', 'fqdn': 'eisy http (3)._http._tcp.local', 'host': 'eisy.local', 'referer': {'address': '192.168.1.205', 'family': 'IPv4', 'port': 5353, 'size': 207}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::221:b9ff:fe02:67ed', '2600:1700:1250:31b0:221:b9ff:fe02:67ed', '192.168.1.192'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'eisy http (5)', 'fqdn': 'eisy http (5)._http._tcp.local', 'host': 'eisy-4.local', 'referer': {'address': '192.168.1.192', 'family': 'IPv4', 'port': 5353, 'size': 209}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['fe80::20d:b9ff:fe53:c584', '2600:1700:1250:31b0:20d:b9ff:fe53:c584', '192.168.1.251'], 'subtypes': [], 'rawTxt': [{'type': 'Buffer', 'data': []}], 'txt': {}, 'name': 'polisy http ', 'fqdn': 'polisy http ._http._tcp.local', 'host': 'polisy.local', 'referer': {'address': '192.168.1.251', 'family': 'IPv4', 'port': 5353, 'size': 208}, 'port': 8080, 'type': 'http', 'protocol': 'tcp'}, {'addresses': ['192.168.1.158'], 'subtypes': [], 'name': 'shelly1pmminig3-543204411268', 'fqdn': 'shelly1pmminig3-543204411268._http._tcp.local', 'host': 'Shelly1PMMiniG3-543204411268.local', 'referer': {'address': '192.168.1.158', 'family': 'IPv4', 'port': 5353, 'size': 154}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [{'type': 'Buffer', 'data': [103, 101, 110, 61, 51]}], 'txt': {'gen': '3'}}, {'addresses': ['192.168.1.119'], 'subtypes': [], 'name': 'Lexmark X204n', 'fqdn': 'Lexmark X204n._http._tcp.local', 'host': 'ET0021B7987BEA.local', 'referer': {'address': '192.168.1.119', 'family': 'IPv4', 'port': 5353, 'size': 119}, 'port': 80, 'type': 'http', 'protocol': 'tcp', 'rawTxt': [], 'txt': {}}], 'success': True} from Polyglot
