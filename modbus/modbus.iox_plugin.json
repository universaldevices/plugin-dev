{
    "plugin": {
          "name":"modbus",
          "description":"Modbus snippet",
          "author":"UD",
          "language": 0,
          "executableName":"modbus.py",
          "installScript":"install.sh",
          "documentationLink":"docs",
          "licenseLink":"lic",
          "shortPoll":5,
          "longPoll":600,
          "profileVersion":"3.0.0",
          "initialLogLevel":3,
          "enableDiscovery":false,
          "enableOAUTH2":false,
          "worksOnPolisy":true,
          "worksOnEisy":true,
          "requiresIoXAccess": false,
          "requirements": ["pymodbus"],
          "version": "1.0.1"
    },
    "editors": [
        {
            "id": "on_off",
            "min": 0,
            "max": 1,
            "uom": "Index | 25",
            "index_names": [
                "Off | 0",
                "On | 1"
            ]
        },
        {
            "id": "ready",
            "min": 0,
            "max": 1,
            "uom": "Index | 25",
            "index_names": [
                "Not Ready | 0",
                "Ready | 1"
            ]
        },
        {
            "id": "yes_no",
            "min": 0,
            "max": 1,
            "uom": "Index | 25",
            "index_names": [
                "No | 0",
                "Yes | 1"
            ]
        },
        {
            "id": "frequency",
            "uom": "Hertz (Hz) | 90",
            "min": 0,
            "max": 100000,
            "precision": 2
        },
        {
            "id": "current",
            "min": 0,
            "max": 1000,
            "uom": "Ampere (amp) | 1",
            "precision": 1
        },
        {
            "id": "pressure",
            "min": 0,
            "max": 1000,
            "uom": "Pound per square inch (PSI) | 138",
            "precision": 1
        },
        {
            "id": "voltage",
            "min": -500,
            "max": 500,
            "uom": "Volt | 72"
        }
    ],
    "protocol": {
        "name": "Modbus",
        "config": {
            "transport": {
                "mode": "TCP",
                "host": "192.168.1.26",
                "port": 502
            }
        }
    },
    "nodedefs": [
        {
            "id":"modbus",
            "name":"ModbusDevice",
            "icon":"Electricity",
            "properties": [
                {
                    "id": "Status | ST",
                    "name": "Status",
                    "editor": {
                        "idref": "ready"
                    } ,
                    "protocol":{
                        "register_address": "0x1fff",
                        "register_data_type": "uint16",
                        "register_type": "input",
                        "eval": "0 if {rval} & 32 == 0"
                    },
                    "is_settable": false
                },
                {
                    "id": "Custom Control 0 | GV0",
                    "name": "Running",
                    "editor": {
                        "idref": "yes_no"
                    } ,
                    "protocol":{
                        "register_address": "0x1fff",
                        "eval": "0 if {rval} & 1 > 0"
                    },
                    "is_settable": false
                },
                {
                    "id": "Custom Control 1 | GV1",
                    "name": "Zero Speed",
                    "editor": {
                        "idref": "on_off"
                    } ,
                    "protocol":{
                        "register_address": "0x1fff",
                        "eval": "0 if {rval} & 2 > 0"
                    },
                    "is_settable": false
                },
                {
                    "id": "Custom Control 2 | GV2",
                    "name": "Alarm",
                    "editor": {
                        "idref": "on_off"
                    } ,
                    "protocol":{
                        "register_address": "0x1fff",
                        "eval": "0 if {rval} & 64 > 0"
                    },
                    "is_settable": false
                },
                {
                    "id": "Custom Control 3 | GV3",
                    "name": "Fault",
                    "editor": {
                        "idref": "yes_no"
                    } ,
                    "protocol":{
                        "register_address": "0x1fff",
                        "eval": "0 if {rval} & 128 > 0"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 4 | GV4",
                    "name": "Frequency Ref",
                    "editor": {
                        "idref": "frequency"
                    },
                    "protocol":{
                        "register_address": "0x2003", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 5 | GV5",
                    "name": "Frequency Out",
                    "editor": {
                        "idref": "frequency"
                    },
                    "protocol":{
                        "register_address": "0x2004", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 6 | GV6",
                    "name": "Current",
                    "editor": {
                        "idref": "current"
                    },
                    "protocol":{
                        "register_address": "0x2005", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 7 | GV7",
                    "name": "Current",
                    "editor": {
                        "idref": "current"
                    },
                    "protocol":{
                        "register_address": "0x2005", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 8 | GV8",
                    "name": "Pressure",
                    "editor": {
                        "idref": "pressure"
                    },
                    "protocol":{
                        "register_address": "0x2006", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                },
                {
                    "id":"Custom Control 9 | GV9",
                    "name": "Voltage",
                    "editor": {
                        "idref": "voltage"
                    },
                    "protocol":{
                        "register_address": "0x2006", 
                        "register_data_type": "uint32",
                        "register_type": "input"
                    },
                    "is_settable": false
                }
            ],
            "commands": {
                "accepts": [],
                "sends": []
            } 
        }
    ]
}