"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_react-core_JsonRoute_tsx"],{24997:(e,t,r)=>{r.d(t,{n:()=>n});function n({appendQuery:e,retainScrollPosition:t,returnTarget:r}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:r}}))}},90532:(e,t,r)=>{function n(e){return a(e)[0]}function a(e){let t=[];for(let r of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[n,a]=r.trim().split("=");e===n&&void 0!==a&&t.push({key:n,value:a})}return t}function o(e,t,r=null,n=!1,a="lax"){let o=document.domain;if(null==o)throw Error("Unable to get document domain");o.endsWith(".github.com")&&(o="github.com");let i="https:"===location.protocol?"; secure":"",l=r?`; expires=${r}`:"";!1===n&&(o=`.${o}`);try{document.cookie=`${e}=${t}; path=/; domain=${o}${l}${i}; samesite=${a}`}catch{}}function i(e,t=!1){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let n=new Date(new Date().getTime()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",o=`; expires=${n}`;!1===t&&(r=`.${r}`);try{document.cookie=`${e}=''; path=/; domain=${r}${o}${a}`}catch{}}r.d(t,{$1:()=>a,d8:()=>o,ej:()=>n,kT:()=>i})},5444:(e,t,r)=>{r.d(t,{bI:()=>A,lp:()=>p,YP:()=>ea,tU:()=>M,hO:()=>ep});var n=r(85893),a=r(22585),o=r(20514),i=r(41968),l=r(30236),s=r(85529),d=r(88216),c=r(67294);let u=c.forwardRef(({expanded:e,onToggleExpanded:t,className:r,ariaControls:c,textAreaId:u,useFilesButtonBreakpoint:m=!0,variant:p},h)=>{let{toggleTreeShortcut:f}=(0,i.bx)(),[x]=(0,l.D)(()=>!1,!0,[]);return(0,n.jsxs)(n.Fragment,{children:[m&&(!e||x)&&(0,n.jsx)(d.r,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":f.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:h,onClick:t,variant:p??"invisible",sx:{color:"fg.muted",px:2,display:"none","@media screen and (max-width: 768px)":{display:"block"}},children:"Files"}),(0,n.jsx)(o.V,{dataHotkey:f.hotkey,className:r,expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:c,ref:h,variant:p,onToggleExpanded:t,sx:{height:"32px",position:"relative",...m?{"@media screen and (max-width: 768px)":{display:!e||x?"none":"flex"}}:{display:"flex"}}}),(0,n.jsx)(a.P,{buttonFocusId:u,buttonHotkey:f.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});u.displayName="ExpandFileTreeButton";var m=r(37227);function p({inputRef:e,onFindFilesShortcut:t,textAreaId:r}){let{sendRepoKeyDownEvent:o}=(0,m.a)(),{findFilesShortcut:l}=(0,i.bx)();return(0,n.jsx)(a.P,{buttonFocusId:r,buttonHotkey:l.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),o("GO_TO_FILE")}})}try{p.displayName||(p.displayName="FindFilesShortcut")}catch{}var h=r(52845),f=r(96478),x=r(56875),g=r(22657),y=r(63625),w=r(27295),b=r(34430),v=r(37478),C=r(80222),j=r(45960),k=r(26415),I=r(13275),R=r(42483),S=r(65379),F=r(50919),E=r(98833),N=r(81248),T=r(8677),O=r(12464);let $=(0,c.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{$.displayName||($.displayName="FileTreeContext")}catch{}var _=r(40961),D=r(38457),P=r(84097),W=r(10800),L=r(47682),B=r(74121);let Z=c.createContext({expandAllFolders:{},refreshTree:{},shouldFetchFolders:{}});function A({expandAllFolders:e,refreshTree:t,shouldFetchFolders:r,children:a}){let o=(0,c.useMemo)(()=>({expandAllFolders:e,refreshTree:t,shouldFetchFolders:r}),[e,t,r]);return(0,n.jsx)(Z.Provider,{value:o,children:a})}function M(){return c.useContext(Z)}try{Z.displayName||(Z.displayName="FileTreeControlContext")}catch{}try{A.displayName||(A.displayName="FileTreeControlProvider")}catch{}var z=r(70697);function G(e,t,r){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let n=t.name.slice(0,t.name.lastIndexOf("/")),a=n.indexOf("/")>-1,o={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:n,hasSimplifiedPath:a},i={items:[e],data:o};return(r.set(o.path,i),a)?G(i,{...o},r):i}function U(e,t,r){if(!e)return{newRootItems:r,rootItemsUpdated:!1};let n=!!e[""]&&H("",t,r,e[""].items);for(let r of Object.keys(e).sort())if(r){let n=t.get(r);n&&(H(r,t,n.items,e[r].items),n.data.totalCount=e[r].totalCount)}return{newRootItems:r,rootItemsUpdated:n}}function H(e,t,r,n){let a=!1;for(let o of n){let n=e?`${e}/${o.name}`:o.name;if(!t.get(n)){let e={items:[],data:{...o}};if(t.set(n,e),o.hasSimplifiedPath){let n=G(e,o,t),i=r.findIndex(e=>e.data.path===n.data.path);-1!==i?n.items.length>r[i].items.length&&(r[i]=n,a=!0):r.push(n)}else r.push(e)}}return a}function V({isActive:e,file:t,onItemSelected:r,getItemUrl:a,selectedItemRef:o,navigate:i,onRenderRow:l,getFileIcon:d}){let{sendRepoClickEvent:u}=(0,m.a)(),p=c.useRef(null),h=(0,P.a)({focusRowRef:p,mouseRowRef:p}),f="submodule"===t.data.contentType,x=c.useCallback(n=>{f?(n.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):n.metaKey||n.ctrlKey||1===n.button?(window.open(a(t.data),"_blank"),n.preventDefault()):e?n.preventDefault():(r?.(),u("FILES_TREE.ITEM",{item_path:t.data.path}),i(a(t.data)),n.stopPropagation())},[t.data,a,e,f,i,r,u]);return l?.(),(0,n.jsxs)(L.L.Item,{ref:p,onSelect:x,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,n.jsx)(L.L.LeadingVisual,{children:d?d(t.data):f?(0,n.jsx)(s.FileSubmoduleIcon,{}):(0,n.jsx)(s.FileIcon,{})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{ref:o,style:{color:f?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),h&&(0,n.jsx)(D.u,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:p,"aria-label":t.data.name,open:!0,direction:"ne"})]})]})}let K=c.memo(V);function q({directory:e,isActive:t,isAncestorOfActive:r,leadingPath:a="",onItemSelected:o,dispatchKnownFolders:i,getItemUrl:l,getFetchUrl:s,selectedItemRef:d,navigate:u,onRenderRow:p,getFileIcon:h,navigateOnClick:f=!0}){let{expandAllFolders:x,shouldFetchFolders:g}=M(),[y,w]=(0,c.useState)(x?.current||r),{sendRepoClickEvent:b}=(0,m.a)(),v=c.useRef(null),C=c.useRef(null),j=(0,P.a)({focusRowRef:C,mouseRowRef:v}),[I,R,S,F,E,N,T]=function(e,t,r){let[n,a]=c.useState(e.items),[o,i]=c.useState(e.data.totalCount||0),[l,s]=c.useState(!1),[d,u]=c.useState(!1),{safeSetTimeout:m}=(0,z.Z)();c.useEffect(()=>{a(e.items)},[e.items]),c.useEffect(()=>{void 0!==e.data.totalCount&&i(e.data.totalCount)},[e.data.totalCount]);let p=c.useCallback(()=>{u(!1)},[]),h=c.useCallback((e,t)=>{let r=e||[...n];a(r.slice(0,100)),m(()=>{a(r),void 0!==t&&i(t)},1)},[n,m]);return[c.useCallback(async()=>{let n=r(e.data),o=new Map;u(!1),s(!0);let l=Date.now(),d=await (0,k.v5)(`${n}?noancestors=1`);try{if(d.ok){let r=await d.json(),n=r.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===r.payload.tree.items.length};return(o.set(e.path,t),e.hasSimplifiedPath)?G(t,e,o):t});t({type:"add",folders:o,processingTime:Date.now()-l}),e.items=n,e.data.totalCount=r.payload.tree.totalCount,n.length>100?h(n,r.payload.tree.totalCount):(a(n),i(r.payload.tree.totalCount))}else u(!0)}catch{u(!0)}s(!1)},[r,e,t,h]),h,n,l,d,p,o]}(e,i,s),O=T-S.length,$=a?`${a}/`:"";(0,c.useEffect)(()=>{x?.current&&!y&&w(!0)},[e,x,y]);let _=c.useCallback(n=>{x?.current&&(x.current=!1),!n||y||F||E||(e.items.length>100?R():0!==e.items.length||t||r||g?.current===!1||I()),n!==y&&w(n)},[x,y,F,E,e.items.length,t,r,g,R,I]),W=c.useCallback(r=>{r.metaKey||r.ctrlKey||1===r.button&&f?(window.open(l(e.data),"_blank"),r.preventDefault()):t?r.preventDefault():(o?.(),b("FILES_TREE.ITEM",{item_path:e.data.path}),f?u(l(e.data)):_?.(!y),r.stopPropagation())},[e.data,l,t,y,u,f,o,_,b]);c.useEffect(()=>{r&&!y&&_?.(!0)},[r]),c.useEffect(()=>{0===e.items.length&&y?_?.(!1):!y&&e.autoExpand&&_?.(!0)},[e.items.length]);let B=c.useCallback(e=>{d&&t&&d(e),v.current=e},[d,t]);return 1===e.items.length&&"directory"===e.items[0].data.contentType?(0,n.jsx)(J,{directoryItems:e.items,leadingPath:$+e.data.name,inheritsActive:t,dispatchKnownFolders:i,onItemSelected:o,selectedItemRef:d,getItemUrl:l,directoryNavigateOnClick:f,getFileIcon:h}):(p?.(),(0,n.jsxs)(L.L.Item,{ref:C,expanded:y,onExpandedChange:_,current:t,onSelect:W,id:`${e.data.path}-item`,containIntrinsicSize:t?void 0:"auto 2rem",children:[(0,n.jsx)(L.L.LeadingVisual,{children:(0,n.jsx)(L.L.DirectoryIcon,{})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{ref:B,children:[$,e.data.name]}),j&&(0,n.jsx)(D.u,{"data-testid":`${e.data.name}-directory-item-tooltip`,id:`${e.data.name}-directory-item-tooltip`,contentRef:C,"aria-label":`${$}${e.data.name}`,open:!0,direction:"ne"})]}),(0,n.jsx)(L.L.SubTree,{state:F?"loading":E?"error":"done",children:E?(0,n.jsx)(L.L.ErrorDialog,{onRetry:I,onDismiss:N,children:"There was an error loading the folder contents."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J,{directoryItems:S,dispatchKnownFolders:i,onItemSelected:o,selectedItemRef:d,getItemUrl:l,directoryNavigateOnClick:f,getFileIcon:h}),O>0&&(0,n.jsx)(ee,{message:`${O} entries not shown`})]})})]}))}let Y=c.memo(q);function X({directoryItems:e,leadingPath:t,inheritsActive:r,onItemSelected:a,dispatchKnownFolders:o,selectedItemRef:i,onRenderRow:l,getItemUrl:s,getFileIcon:d,directoryNavigateOnClick:u=!0}){let{path:m}=(0,_.Br)(),p=(0,y.B)(),h=(0,W.s)(),f=c.useRef(h);return(0,n.jsx)(n.Fragment,{children:e.map(e=>{let c=m===e.data.path,h=c||m.startsWith(`${e.data.path}/`);return"directory"===e.data.contentType?(0,n.jsx)(Y,{isActive:r||c,isAncestorOfActive:h,onItemSelected:a,leadingPath:t,directory:e,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:p.getItemUrl,selectedItemRef:h?i:void 0,navigate:f.current,onRenderRow:l,navigateOnClick:u,getFileIcon:d},e.data.name):(0,n.jsx)(K,{onItemSelected:a,file:e,isActive:c,getItemUrl:s,selectedItemRef:c?i:void 0,navigate:f.current,onRenderRow:l,getFileIcon:d},e.data.name)})})}let J=c.memo(X);function Q(e){let{data:t,rootItems:r,setRootItems:a,fetchError:o,processingTime:i,loading:l,onRenderRow:s,getItemUrl:d,getFileIcon:u}=e,{knownFolders:m,dispatchKnownFolders:p}=(0,c.useContext)($),{refreshTree:h}=M();c.useEffect(()=>{if(l)return;let e=new Map,n=[];h?.current||(e=new Map(m),n=r.slice());let{newRootItems:o,rootItemsUpdated:s}=U(t,e,n);(o.length>r.length||s||h?.current)&&a(o),(e.size>m.size||h?.current)&&p({type:"set",folders:e,processingTime:i}),h?.current&&(h.current=!1)},[t,l]);let f=c.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,n.jsx)(R.Z,{onMouseDown:f,sx:{px:3,pb:2,...e.sx},"data-testid":"repos-file-tree-container",children:l?(0,n.jsx)(R.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,n.jsx)(B.Z,{"aria-label":"Loading file tree"})}):(0,n.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,n.jsxs)(L.L,{"aria-label":"Files",children:[o&&(0,n.jsx)(ee,{message:"Some files could not be loaded."}),(0,n.jsx)(J,{directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:p,selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:d,getFileIcon:u})]})})})}function ee({message:e}){return(0,n.jsxs)(L.L.Item,{id:"error-tree-row",children:[(0,n.jsx)(L.L.LeadingVisual,{children:(0,n.jsx)(E.Z,{icon:s.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,n.jsx)(R.Z,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{V.displayName||(V.displayName="WrappedFileTreeRow")}catch{}try{K.displayName||(K.displayName="FileTreeRow")}catch{}try{q.displayName||(q.displayName="WrappedDirectoryTreeRow")}catch{}try{Y.displayName||(Y.displayName="DirectoryTreeRow")}catch{}try{X.displayName||(X.displayName="WrappedDirectoryContents")}catch{}try{J.displayName||(J.displayName="DirectoryContents")}catch{}try{Q.displayName||(Q.displayName="ReposFileTreeView")}catch{}try{ee.displayName||(ee.displayName="ErrorTreeRow")}catch{}var et=r(24997);function er({sx:e,onClick:t,textAreaId:r}){let{searchShortcut:o}=(0,i.bx)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.h,{unsafeDisableTooltip:!0,"aria-label":"Search this repository",icon:s.SearchIcon,"data-hotkey":o.hotkey,sx:{color:"fg.subtle",fontSize:14,fontWeight:"normal",flexShrink:0,...e},size:"medium",onClick:e=>{t?.(),(0,et.n)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})}}),(0,n.jsx)(a.P,{buttonFocusId:r,buttonHotkey:o.hotkey,onButtonClick:()=>{let e=document.getElementById(r);t?.(),(0,et.n)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{er.displayName||(er.displayName="SearchButton")}catch{}let en=C._G.xxxlarge;function ea({collapseTree:e,showTree:t,fileTree:r,treeToggleElement:a,treeToggleRef:o,onItemSelected:i,processingTime:d,searchBoxRef:u,repo:m,path:w,refInfo:_,isFilePath:D,foldersToFetch:P,id:W,onFindFilesShortcut:L,textAreaId:B,getItemUrlOverride:Z,headerSx:A,paneSx:M,paneContentsSx:z,treeContainerSx:G,findFileWorkerPath:H,headerContent:V,getFileIcon:K,showFindFile:q=!0,directoryNavigateOnClick:Y=!0,showRefSelectorRow:X=!0}){if(q&&void 0===H)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:J}=(0,g.F)(),[ee,et]=c.useState(P.length>0),[ea,el]=c.useState(!1),es=c.useRef([]),ed=c.useRef(null),ec=c.useRef(!1),eu=c.useRef(!1),em=c.useRef(null),{query:ep}=(0,x.aM)(),{codeCenterOption:eh}=(0,j.OY)(),ef=c.useRef(J),[ex]=(0,l.D)(()=>!1,!0,[]),{getItemUrl:eg}=(0,y.B)();Z&&(eg=Z);let ey=[],ew=new Map,eb=c.useRef(ee);!eb.current&&r&&(ey=U(r,ew,[]).newRootItems),eb.current=!0;let[ev,eC]=c.useReducer(eo,ew),[ej,ek]=c.useState(ey);c.useEffect(()=>{t&&(!ep||window.innerWidth>=C._G.large)||(em.current=null)},[t,ep]),c.useEffect(()=>{J&&ef.current!==J&&window.innerWidth<en&&e({setCookie:!1}),ef.current=J},[e,J]);let eI=c.useCallback(async e=>{let t=eg({contentType:"directory",path:e,name:e});try{let n=await (0,k.v5)(`${t}?noancestors=1`);if(n.ok){let t=await n.json(),a={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};r[e]=a}else el(!0)}catch{el(!0)}es.current.push(e),es.current.length===P.length&&et(!1)},[r,P.length,eg]);c.useEffect(()=>{if(P&&!ec.current)for(let e of P)eI(e);ec.current=!0},[eI,P,ev.size]);let eR=c.useCallback(e=>{t&&(!ep||window.innerWidth>=C._G.large)&&ed.current&&e&&(0,I.z)(e,ed.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[ep,t]),eS=c.useCallback(e=>{e&&eu.current?eu.current=!1:em.current!==e&&eR(e),em.current=e},[eR]),eF=c.useCallback(e=>{ed.current=e,window.innerWidth>=en&&eR(em.current)},[eR]),eE=c.useCallback(e=>{e&&eR(em.current)},[eR]),{screenSize:eN}=(0,C.eI)(),eT=!ex&&(J&&eN<en||eN<C._G.xlarge)&&eN>=C._G.large,eO=c.useCallback(()=>{eT||i(),eu.current=!0},[i,eT]),e$=t?{}:{display:"none"},e_=D?w.substring(0,w.lastIndexOf("/")):w,eD=(0,c.useMemo)(()=>({knownFolders:ev,dispatchKnownFolders:eC}),[ev]),eP=c.useMemo(()=>ex?null:(0,O.oD)(),[ex]),eW=c.useCallback(()=>{window.innerWidth>C._G.large&&window.innerWidth<C._G.xxxxlarge&&e({setCookie:!1})},[e]),eL=(0,n.jsxs)(R.Z,{id:W,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ex?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"},...z},children:[(0,n.jsxs)(R.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",px:3,pb:2,pt:3,...A},children:[V,X&&(0,n.jsxs)(R.Z,{sx:{mx:4,display:"flex",width:"100%"},children:[(0,n.jsx)(R.Z,{sx:{flexGrow:1},children:(0,n.jsx)(f.S,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,n.jsxs)(R.Z,{sx:{ml:2,whiteSpace:"nowrap","&:hover button:not(:hover)":{borderLeftColor:"var(--button-default-borderColor-hover, var(--color-btn-hover-border))"}},children:[_.canEdit&&(0,n.jsx)(S.Z,{"aria-label":"Add file",direction:"s",children:(0,n.jsx)(F.h,{unsafeDisableTooltip:!0,"aria-label":"Add file",as:v.r,sx:{color:"fg.subtle",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},icon:s.PlusIcon,to:(0,b.Qi)({repo:m,path:e_,commitish:_.name,action:"new"}),onClick:eO})}),(0,n.jsx)(er,{sx:_.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eW,textAreaId:B})]})]})]}),_.currentOid&&q&&H&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.default,{commitOid:_.currentOid,findFileWorkerPath:H,onItemSelected:i,searchBoxRef:u,sx:{ml:3,mr:3,mb:"12px","@media screen and (max-width: 768px)":ex?{display:"none"}:void 0}}),(0,n.jsx)(p,{inputRef:u,onFindFilesShortcut:L,textAreaId:B})]}),(0,n.jsx)(ei,{scrollingRef:ed}),(0,n.jsxs)(R.Z,{ref:eF,sx:{flexGrow:1,maxHeight:"100% !important",overflowY:"auto","@media screen and (max-width: 768px)":ex?{display:"none"}:void 0,scrollbarGutter:"stable"},children:[ex?_.currentOid&&(0,n.jsx)("div",{className:ep?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,n.jsx)(Q,{data:r,rootItems:ej,selectedItemRef:eS,setRootItems:ek,onItemSelected:eO,processingTime:d,loading:ee,fetchError:ea,directoryNavigateOnClick:Y,getItemUrl:eg,sx:G,getFileIcon:K})}):eP&&(0,n.jsx)(O.t0,{node:eP}),!_.currentOid&&!m.isEmpty&&(0,n.jsxs)(R.Z,{sx:{mt:2,mx:4,mb:"12px",fontSize:1,alignItems:"center",color:"danger.fg"},children:[(0,n.jsx)(E.Z,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]}),eB=eT||J?{"@media print, screen and (max-width: 1349px) and (min-width: 768px)":{display:"none"}}:{"@media print, screen and (max-width: 1011px) and (min-width: 768px)":{display:"none"}};return(0,n.jsxs)($.Provider,{value:eD,children:[eP&&(0,n.jsx)(O.Nq,{node:eP,children:_.currentOid&&(0,n.jsx)("div",{className:ep?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,n.jsx)(Q,{data:r,directoryNavigateOnClick:Y,rootItems:ej,selectedItemRef:eS,setRootItems:ek,onItemSelected:eO,processingTime:d,loading:ee,fetchError:ea,getItemUrl:eg,sx:G,getFileIcon:K})})}),!t&&eh.enabled&&a&&(0,n.jsx)(R.Z,{sx:{position:"absolute",p:3,display:"none","@media screen and (min-width: 1360px)":{display:"block"}},children:a}),(0,n.jsx)(N.jw.Pane,{position:"start",sticky:!0,sx:{minWidth:0,...e$,flexDirection:["column","column","inherit"],"@media screen and (min-width: 768px)":{height:"100vh",maxHeight:"100vh !important"},...eB,...M},padding:"none",width:"large",resizable:!0,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"line",narrow:"none"},children:t&&!eT&&(0,n.jsx)(R.Z,{className:ex?J?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:(0,n.jsx)(n.Fragment,{children:eL})})}),t&&eT&&ef.current===J&&(0,n.jsx)(T.ZP,{className:ex?J?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,ref:eE,returnFocusRef:o,onClickOutside:eW,onEscape:eW,top:0,position:"fixed",sx:{...e$,width:"440px",height:"100vh",maxHeight:"100vh",borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,n.jsx)(n.Fragment,{children:eL})})]})}function eo(e,t){switch(t.type){case"set":{let r=e?.size>0;return(0,w.qP)("file-tree",{"fetch-count":r?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":r?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let r=new Map([...e,...t.folders]);return(0,w.qP)("file-tree",{"fetch-count":t.folders.size,"file-count":r.size,"nav-type":"fetch","processing-time":t.processingTime}),r}default:throw Error(`Unknown action type: ${t.type}`)}}function ei({scrollingRef:e}){let[t,r]=c.useState(e.current&&e.current.scrollTop>0);return c.useEffect(()=>{if(e.current){let t=e.current,n=()=>{t&&t.scrollTop>0?r(!0):r(!1)};return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}},[e]),t?(0,n.jsx)(R.Z,{sx:{borderBottom:"1px solid",borderColor:"border.default",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.3)"}}):null}try{ea.displayName||(ea.displayName="ReposFileTreePane")}catch{}try{ei.displayName||(ei.displayName="TreeBorder")}catch{}var el=r(94504),es=r(90532),ed=r(14916),ec=r(930),eu=r(25469),em=r(75308);function ep(e,t,r,a,o,i="fileTreeExpanded",l){let{sendRepoClickEvent:s}=(0,m.a)(),d=(0,ed.x)(),p=(0,es.ej)(i),h=!(void 0!==ec.n4),f=!d&&p&&"false"!==p.value||d&&r;void 0===f&&(f=!1);let x=(0,c.useRef)(null),g=(0,c.useRef)(null),{screenSize:y}=(0,C.eI)(),[w,b]=(0,c.useState)(f),v=(0,c.useRef)(f),j=(0,c.useRef)(!1),k=(0,c.useRef)(!1),I=(0,c.useCallback)(()=>!(t.current&&window.innerWidth>=en||!t.current&&window.innerWidth>=C._G.xlarge),[t]);(0,eu.b)(()=>{let e=I();e||(j.current=!1),b((0,el.$)()&&y<C._G.large&&!k.current||(!e||j.current)&&(d&&w||!d&&p?.value!=="false"))},[j,p?.value,y,t,I,d]),(0,eu.b)(()=>{let e=!t.current&&window.innerWidth<C._G.xlarge,r=!t.current&&window.innerWidth>=C._G.xlarge;e&&v.current&&!(0,el.$)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t,y]),(0,eu.b)(()=>{let e=t.current&&window.innerWidth<en,r=t.current&&window.innerWidth>=en;e&&v.current&&!(0,el.$)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t]);let R=(0,c.useCallback)(e=>{if(b(!0),I()&&(j.current=!0),e?.setCookie){o?.(!0),v.current=!0;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,es.d8)(i,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>x.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>g.current?.focus())},[i,2592e6,I,o]),S=(0,c.useCallback)(e=>{if(b(!1),j.current=!1,k.current=!0,e?.setCookie){o?.(!1),v.current=!1;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,es.d8)(i,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>x.current?.focus())},[i,2592e6,o]),F=(0,c.useCallback)(e=>e&&window.innerWidth>=en||!t.current&&window.innerWidth>=C._G.xlarge,[t]),E=(0,c.useMemo)(()=>(0,n.jsx)(em.Z,{as:"h2",sx:{display:"flex",fontSize:1},children:(0,n.jsx)(u,{expanded:w,ariaControls:e,onToggleExpanded:()=>{s(w?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),w?S({focus:"toggleButton",setCookie:F(t.current)}):R({focus:"toggleButton",setCookie:F(t.current)})},className:void 0!==p||w||h?void 0:"react-tree-toggle-button-with-indicator",ref:x,textAreaId:a,...l})}),[w,e,p,h,a,l,s,S,F,t,R]);return{isTreeExpanded:w,expandTree:R,collapseTree:S,treeToggleElement:E,treeToggleRef:x,searchBoxRef:g}}},84097:(e,t,r)=>{r.d(t,{a:()=>a});var n=r(67294);function a({focusRowRef:e,mouseRowRef:t}){let[r,a]=n.useState(!1);return n.useEffect(()=>{if(e.current&&t.current){let r=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{r()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{r()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),r}},22585:(e,t,r)=>{r.d(t,{P:()=>a});var n=r(85893);function a({buttonFocusId:e,buttonHotkey:t,onButtonClick:r,buttonTestLabel:a,onlyAddHotkeyScopeButton:o}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{hidden:!0,"data-testid":a||"","data-hotkey":t,onClick:r,"data-hotkey-scope":e}),!o&&(0,n.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:r})]})}try{a.displayName||(a.displayName="DuplicateOnKeydownButton")}catch{}},20514:(e,t,r)=>{r.d(t,{V:()=>l});var n=r(85893),a=r(85529),o=r(65379),i=r(50919);let l=r(67294).forwardRef(({expanded:e,testid:t,ariaLabel:r,ariaControls:l,onToggleExpanded:s,sx:d,alignment:c,dataHotkey:u,className:m,tooltipDirection:p,variant:h},f)=>(0,n.jsx)(o.Z,{"aria-label":r,id:`expand-button-${t}`,direction:p,children:(0,n.jsx)(i.h,{unsafeDisableTooltip:!0,ref:f,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":l,icon:e?"left"===c?a.SidebarExpandIcon:a.SidebarCollapseIcon:"left"===c?a.SidebarCollapseIcon:a.SidebarExpandIcon,sx:{color:"fg.muted",...d},"data-hotkey":u,onClick:e=>{s(e)},variant:h??"invisible",className:m})}));l.displayName="ExpandButton"},22657:(e,t,r)=>{r.d(t,{F:()=>m,a:()=>u});var n=r(85893),a=r(57111),o=r(14916),i=r(31248),l=r(80222),s=r(67294);let d=(0,i.Z)("localStorage"),c=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:r}){let i="blame"in t,u=(0,a.g6)(t),m=(0,o.x)(),p=(0,s.useRef)(),[h,f]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!m&&""!==e&&null!==e||m&&t.symbolsExpanded)return"codeNav"}),x=(i||u)&&"codeNav"===h?void 0:h;s.useEffect(()=>{r.current=x},[x,r]);let g=(0,s.useCallback)((e,t)=>{f(r=>(r&&p.current&&p.current.focus(),p.current=t,i||u&&"codeNav"===e?void 0:e))},[i,u]);!function(e){let{screenSize:t}=(0,l.eI)(),r=(0,s.useRef)(t);(0,s.useEffect)(()=>{let n=r.current>=l._G.large,a=r.current===t;t<l._G.large&&(n||a)&&e(void 0),r.current=t},[t,e])}(g);let y=(0,s.useMemo)(()=>({openPanel:x,setOpenPanel:g}),[x,g]);return(0,n.jsx)(c.Provider,{value:y,children:e})}function m(){return(0,s.useContext)(c)}try{c.displayName||(c.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},53652:(e,t,r)=>{r.d(t,{g:()=>n});function n({path:e,Component:t,shouldNavigateOnError:r,transitionType:n,children:a}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let r=`${e.pathname}${e.search}`;t=await window.fetch(r,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom"}})}catch(e){return{type:r?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:r?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:r?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:n,children:a}}},45960:(e,t,r)=>{r.d(t,{Kl:()=>p,OY:()=>f,SM:()=>s});var n=r(85893),a=r(31248),o=r(67294);let i=(0,a.Z)("localStorage"),l="codeView.codeFolding",s="codeView.codeWrapping",d="codeView.centerView",c="codeView.openSymbolsOnClick",u=new Map([[l,"Show code folding buttons"],[s,"Wrap lines"],[d,"Center content"],[c,"Open symbols on click"]]),m=(0,o.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),p=({children:e})=>{let t=h(l,!0),r=h(s,!1),a=h(d,!1),i=h(c,!0),u=(0,o.useMemo)(()=>({codeFoldingOption:t,codeWrappingOption:r,codeCenterOption:a,openSymbolsOption:i}),[t,r,a,i]);return(0,n.jsx)(m.Provider,{value:u,children:e})};function h(e,t){let r=i.getItem(e),[n,a]=(0,o.useState)(()=>r?"true"===r:t),l=u.get(e)||"";return{name:e,enabled:n,setEnabled:a,label:l}}function f(){return(0,o.useContext)(m)}try{m.displayName||(m.displayName="CodeViewOptionsContext")}catch{}try{p.displayName||(p.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_react-core_JsonRoute_tsx-c26fab9a57bc.js.map