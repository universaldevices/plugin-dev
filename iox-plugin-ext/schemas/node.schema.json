{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
       "protocol": {
          "type":"string",
          "oneOf": [
            {
              "enum":["Proprietary"]
            },
            {
              "enum":["Modbus"]
            },
            {
              "enum":["Shelly"]
            }
          ],
          "description": "The underyling protoocol",
          "default":"Proprietary"
        },
       "id": {
          "type": "string",
          "pattern": "^[^\\s]+$",
          "description": "The id used to identify this node"
        },
        "name": {
          "type": "string",
          "description": "The human readable name. If you have NLS files, this name will be translated"
        },
        "parent": {
          "type": "string",
          "description": "If you have a controller / child relationship, parent is the id of the controller node"
        },
        "icon":{
          "type": "string",
          "$ref": "icon.schema.json"
        },
        "properties": {
          "if": {
            "properties":{
                "protocol":{
                    "const" : "Modbus"
                }
            }
            },"then":{
              "$ref": "modbus.node.properties.schema.json"
            },"else":{
              "$ref": "node.properties.schema.json"
            }
        },
        "commands": {
          "$ref": "commands.schema.json"
        }
  },
  "required": ["id", "name", "properties", "commands"],
  "additionalProperties": false
}
 